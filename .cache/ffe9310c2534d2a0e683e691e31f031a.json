{"id":"1tdU","dependencies":[{"name":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\package.json","includedInParent":true,"mtime":1534490769265},{"name":"./logger","loc":{"line":2,"column":23},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\logger.js"},{"name":"../models/Base","loc":{"line":3,"column":26},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Base.js"},{"name":"../models/Publication","loc":{"line":4,"column":28},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Publication.js"},{"name":"../models/Author","loc":{"line":5,"column":23},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Author.js"},{"name":"./faculty.js","loc":{"line":6,"column":37},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\faculty.js"},{"name":"./general.js","loc":{"line":7,"column":44},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\publications.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\general.js"}],"generated":{"js":"const e=require(\"fs\"),r=require(\"./logger\"),a=require(\"../models/Base\"),t=require(\"../models/Publication\"),c=require(\"../models/Author\"),{getActiveFaculty:o}=require(\"./faculty.js\"),{createFolder:s,saveFiles:n}=require(\"./general.js\");module.exports={async saveAllOtherAuthors(){const e=await l();let r={};e.forEach(e=>{const{AUT_PubCode:a,AUT_NAME:t}=e;r[a]||(r[a]=[]),r[a].push(t)}),n(\"other_authors\",\"publications\",JSON.stringify(r))},async savePublications(){(await f().catch(e=>r.log(\"error\",e))).forEach(e=>{_(e)})},async savePublicationsYears(){const e=await E().catch(e=>r.log(\"error\",e));let a=[];e.forEach(e=>{const{PUB_Year:r}=e;a.push(r)}),n(\"years\",\"publications\",JSON.stringify(a))},getFacultyPublications:async e=>y(e),async saveFacultyPublications(){(await o().catch(e=>r.log(\"error\",e))).forEach(async e=>{const{Per_ATID:r}=e,a=await y(r).catch(e=>reject(e));P(r,a)})}};const i=e=>new Promise((r,a)=>{t.findAll({order:[[\"PUB_Year\",\"DESC\"]],include:[{model:c,where:{AUT_ATID:e},as:\"authors\"}]}).then(e=>{let a=[];e.forEach(e=>{const{PUB_Year:r,PUB_IEEE:t,PUB_CODE:c}=e,o={year:r,title:t,code:c,authors:[]};a.push(o)}),r(a)}).catch(e=>a(e))}),l=e=>a.query(\"select AUT_PubCode, AUT_NAME from PubAuthors\",{model:c}),h=e=>a.query(`select AUT_NAME from PubAuthors where AUT_PubCode=${e}`,{model:c}),u=async e=>new Promise((r,a)=>{let t=[];e.forEach(async e=>{t.push(new Promise(async(r,a)=>{const t=await h(e.code).catch(e=>a(e));r({article:e,others:t})}))}),Promise.all(t).then(e=>{let a=[];e.forEach(e=>{const{article:r,others:t}=e;t.forEach(e=>{r.authors.push(e.get(\"AUT_NAME\"))}),a.push(r)}),r(a)}).catch(e=>a(e))}),y=async e=>new Promise(async(r,a)=>{const t=await i(e).catch(e=>a(e));r(await u(t).catch(e=>a(e)))}),P=async(e,r)=>{const a=JSON.stringify(r);n(e,\"faculty/publications\",a)},E=()=>a.query(\"select distinct PUB_Year from PubWork where PUB_Year<>'' order by PUB_Year\",{model:t}),f=async()=>{const e=await E().catch(e=>r.log(\"error\",e));let a=[];return e.forEach(e=>{const{PUB_Year:r}=e;a.push(r)}),a},A=(e=null)=>{const r={};return e&&(r.PUB_Year=e),t.findAll({where:r})},_=async(e=null)=>{const a=await A(e).catch(e=>r.log(\"error\",e));let t=[],c=[];a.forEach(async r=>{const{PUB_IEEE:a,PUB_CODE:t}=r;c.push({year:e,title:a,code:t})}),Promise.all(c).then(r=>{r.forEach(e=>t.push(e)),n(e,\"publications\",JSON.stringify(t))}).catch(e=>r.log(\"error\",e))},d=async(e,a,t)=>new Promise(async(c,o)=>{const s=await h(t).catch(e=>{r.log(\"error\",e),o(\"something went wrong ...\")}),n={title:a,code:t,year:e,authors:[]};s&&s.forEach(e=>{n.authors.push(e.get(\"AUT_NAME\"))}),c(n)});","map":{"mappings":[{"source":"app\\files\\publications.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"app\\files\\publications.js","name":"fs","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"app\\files\\publications.js","name":"require","original":{"line":1,"column":11},"generated":{"line":1,"column":8}},{"source":"app\\files\\publications.js","original":{"line":1,"column":19},"generated":{"line":1,"column":16}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":2,"column":6},"generated":{"line":1,"column":22}},{"source":"app\\files\\publications.js","name":"require","original":{"line":2,"column":15},"generated":{"line":1,"column":24}},{"source":"app\\files\\publications.js","original":{"line":2,"column":23},"generated":{"line":1,"column":32}},{"source":"app\\files\\publications.js","name":"sequelize","original":{"line":3,"column":6},"generated":{"line":1,"column":44}},{"source":"app\\files\\publications.js","name":"require","original":{"line":3,"column":18},"generated":{"line":1,"column":46}},{"source":"app\\files\\publications.js","original":{"line":3,"column":26},"generated":{"line":1,"column":54}},{"source":"app\\files\\publications.js","name":"Publication","original":{"line":4,"column":6},"generated":{"line":1,"column":72}},{"source":"app\\files\\publications.js","name":"require","original":{"line":4,"column":20},"generated":{"line":1,"column":74}},{"source":"app\\files\\publications.js","original":{"line":4,"column":28},"generated":{"line":1,"column":82}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":5,"column":6},"generated":{"line":1,"column":107}},{"source":"app\\files\\publications.js","name":"require","original":{"line":5,"column":15},"generated":{"line":1,"column":109}},{"source":"app\\files\\publications.js","original":{"line":5,"column":23},"generated":{"line":1,"column":117}},{"source":"app\\files\\publications.js","original":{"line":6,"column":6},"generated":{"line":1,"column":138}},{"source":"app\\files\\publications.js","name":"getActiveFaculty","original":{"line":6,"column":8},"generated":{"line":1,"column":155}},{"source":"app\\files\\publications.js","name":"require","original":{"line":6,"column":29},"generated":{"line":1,"column":158}},{"source":"app\\files\\publications.js","original":{"line":6,"column":37},"generated":{"line":1,"column":166}},{"source":"app\\files\\publications.js","original":{"line":7,"column":6},"generated":{"line":1,"column":183}},{"source":"app\\files\\publications.js","name":"createFolder","original":{"line":7,"column":8},"generated":{"line":1,"column":196}},{"source":"app\\files\\publications.js","original":{"line":7,"column":6},"generated":{"line":1,"column":198}},{"source":"app\\files\\publications.js","name":"saveFiles","original":{"line":7,"column":22},"generated":{"line":1,"column":208}},{"source":"app\\files\\publications.js","name":"require","original":{"line":7,"column":36},"generated":{"line":1,"column":211}},{"source":"app\\files\\publications.js","original":{"line":7,"column":44},"generated":{"line":1,"column":219}},{"source":"app\\files\\publications.js","name":"module","original":{"line":8,"column":0},"generated":{"line":1,"column":235}},{"source":"app\\files\\publications.js","name":"exports","original":{"line":8,"column":7},"generated":{"line":1,"column":242}},{"source":"app\\files\\publications.js","original":{"line":8,"column":17},"generated":{"line":1,"column":250}},{"source":"app\\files\\publications.js","name":"saveAllOtherAuthors","original":{"line":9,"column":8},"generated":{"line":1,"column":251}},{"source":"app\\files\\publications.js","name":"others","original":{"line":10,"column":10},"generated":{"line":1,"column":279}},{"source":"app\\files\\publications.js","name":"others","original":{"line":10,"column":10},"generated":{"line":1,"column":285}},{"source":"app\\files\\publications.js","name":"_getAllOtherAuthors","original":{"line":10,"column":25},"generated":{"line":1,"column":293}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":11,"column":8},"generated":{"line":1,"column":297}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":11,"column":8},"generated":{"line":1,"column":301}},{"source":"app\\files\\publications.js","original":{"line":11,"column":18},"generated":{"line":1,"column":303}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":12,"column":11},"generated":{"line":1,"column":306}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":12,"column":11},"generated":{"line":1,"column":308}},{"source":"app\\files\\publications.js","name":"author","original":{"line":12,"column":19},"generated":{"line":1,"column":316}},{"source":"app\\files\\publications.js","original":{"line":13,"column":12},"generated":{"line":1,"column":320}},{"source":"app\\files\\publications.js","original":{"line":13,"column":12},"generated":{"line":1,"column":326}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":13,"column":14},"generated":{"line":1,"column":338}},{"source":"app\\files\\publications.js","original":{"line":13,"column":12},"generated":{"line":1,"column":340}},{"source":"app\\files\\publications.js","name":"AUT_NAME","original":{"line":13,"column":27},"generated":{"line":1,"column":349}},{"source":"app\\files\\publications.js","name":"author","original":{"line":13,"column":40},"generated":{"line":1,"column":352}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":14,"column":11},"generated":{"line":1,"column":354}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":14,"column":19},"generated":{"line":1,"column":356}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":15,"column":16},"generated":{"line":1,"column":361}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":15,"column":16},"generated":{"line":1,"column":363}},{"source":"app\\files\\publications.js","original":{"line":15,"column":31},"generated":{"line":1,"column":366}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":17,"column":14},"generated":{"line":1,"column":370}},{"source":"app\\files\\publications.js","name":"AUT_PubCode","original":{"line":17,"column":14},"generated":{"line":1,"column":372}},{"source":"app\\files\\publications.js","name":"push","original":{"line":17,"column":27},"generated":{"line":1,"column":375}},{"source":"app\\files\\publications.js","name":"AUT_NAME","original":{"line":17,"column":32},"generated":{"line":1,"column":380}},{"source":"app\\files\\publications.js","original":{"line":19,"column":14},"generated":{"line":1,"column":385}},{"source":"app\\files\\publications.js","original":{"line":19,"column":14},"generated":{"line":1,"column":387}},{"source":"app\\files\\publications.js","original":{"line":19,"column":31},"generated":{"line":1,"column":403}},{"source":"app\\files\\publications.js","name":"JSON","original":{"line":19,"column":47},"generated":{"line":1,"column":418}},{"source":"app\\files\\publications.js","name":"stringify","original":{"line":19,"column":52},"generated":{"line":1,"column":423}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":19,"column":62},"generated":{"line":1,"column":433}},{"source":"app\\files\\publications.js","name":"savePublications","original":{"line":21,"column":8},"generated":{"line":1,"column":438}},{"source":"app\\files\\publications.js","name":"_getPublicationsArray","original":{"line":22,"column":24},"generated":{"line":1,"column":470}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":22,"column":48},"generated":{"line":1,"column":474}},{"source":"app\\files\\publications.js","name":"err","original":{"line":22,"column":54},"generated":{"line":1,"column":480}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":23,"column":6},"generated":{"line":1,"column":483}},{"source":"app\\files\\publications.js","name":"log","original":{"line":23,"column":13},"generated":{"line":1,"column":485}},{"source":"app\\files\\publications.js","original":{"line":23,"column":17},"generated":{"line":1,"column":489}},{"source":"app\\files\\publications.js","name":"err","original":{"line":23,"column":26},"generated":{"line":1,"column":497}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":25,"column":10},"generated":{"line":1,"column":502}},{"source":"app\\files\\publications.js","name":"year","original":{"line":25,"column":18},"generated":{"line":1,"column":510}},{"source":"app\\files\\publications.js","name":"year","original":{"line":26,"column":24},"generated":{"line":1,"column":514}},{"source":"app\\files\\publications.js","name":"year","original":{"line":26,"column":24},"generated":{"line":1,"column":516}},{"source":"app\\files\\publications.js","name":"savePublicationsYears","original":{"line":29,"column":8},"generated":{"line":1,"column":522}},{"source":"app\\files\\publications.js","name":"years","original":{"line":30,"column":10},"generated":{"line":1,"column":552}},{"source":"app\\files\\publications.js","name":"years","original":{"line":30,"column":10},"generated":{"line":1,"column":558}},{"source":"app\\files\\publications.js","name":"_getPublicationsYears","original":{"line":30,"column":24},"generated":{"line":1,"column":566}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":30,"column":48},"generated":{"line":1,"column":570}},{"source":"app\\files\\publications.js","name":"err","original":{"line":30,"column":54},"generated":{"line":1,"column":576}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":31,"column":6},"generated":{"line":1,"column":579}},{"source":"app\\files\\publications.js","name":"log","original":{"line":31,"column":13},"generated":{"line":1,"column":581}},{"source":"app\\files\\publications.js","original":{"line":31,"column":17},"generated":{"line":1,"column":585}},{"source":"app\\files\\publications.js","name":"err","original":{"line":31,"column":26},"generated":{"line":1,"column":593}},{"source":"app\\files\\publications.js","name":"yearsArr","original":{"line":33,"column":8},"generated":{"line":1,"column":597}},{"source":"app\\files\\publications.js","name":"yearsArr","original":{"line":33,"column":8},"generated":{"line":1,"column":601}},{"source":"app\\files\\publications.js","original":{"line":33,"column":19},"generated":{"line":1,"column":603}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":34,"column":10},"generated":{"line":1,"column":606}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":34,"column":10},"generated":{"line":1,"column":608}},{"source":"app\\files\\publications.js","name":"yearObj","original":{"line":34,"column":18},"generated":{"line":1,"column":616}},{"source":"app\\files\\publications.js","original":{"line":35,"column":12},"generated":{"line":1,"column":620}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":35,"column":14},"generated":{"line":1,"column":626}},{"source":"app\\files\\publications.js","name":"year","original":{"line":35,"column":24},"generated":{"line":1,"column":635}},{"source":"app\\files\\publications.js","name":"yearObj","original":{"line":35,"column":33},"generated":{"line":1,"column":638}},{"source":"app\\files\\publications.js","name":"push","original":{"line":36,"column":15},"generated":{"line":1,"column":640}},{"source":"app\\files\\publications.js","name":"push","original":{"line":36,"column":15},"generated":{"line":1,"column":642}},{"source":"app\\files\\publications.js","name":"year","original":{"line":36,"column":20},"generated":{"line":1,"column":647}},{"source":"app\\files\\publications.js","original":{"line":38,"column":14},"generated":{"line":1,"column":652}},{"source":"app\\files\\publications.js","original":{"line":38,"column":14},"generated":{"line":1,"column":654}},{"source":"app\\files\\publications.js","original":{"line":38,"column":23},"generated":{"line":1,"column":662}},{"source":"app\\files\\publications.js","name":"JSON","original":{"line":38,"column":39},"generated":{"line":1,"column":677}},{"source":"app\\files\\publications.js","name":"stringify","original":{"line":38,"column":44},"generated":{"line":1,"column":682}},{"source":"app\\files\\publications.js","name":"yearsArr","original":{"line":38,"column":54},"generated":{"line":1,"column":692}},{"source":"app\\files\\publications.js","name":"getFacultyPublications","original":{"line":40,"column":8},"generated":{"line":1,"column":697}},{"source":"app\\files\\publications.js","original":{"line":40,"column":2},"generated":{"line":1,"column":720}},{"source":"app\\files\\publications.js","name":"username","original":{"line":40,"column":31},"generated":{"line":1,"column":726}},{"source":"app\\files\\publications.js","name":"_getFacultyPublications","original":{"line":41,"column":11},"generated":{"line":1,"column":729}},{"source":"app\\files\\publications.js","name":"username","original":{"line":41,"column":35},"generated":{"line":1,"column":731}},{"source":"app\\files\\publications.js","name":"saveFacultyPublications","original":{"line":43,"column":8},"generated":{"line":1,"column":734}},{"source":"app\\files\\publications.js","name":"getActiveFaculty","original":{"line":44,"column":29},"generated":{"line":1,"column":773}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":44,"column":48},"generated":{"line":1,"column":777}},{"source":"app\\files\\publications.js","name":"err","original":{"line":44,"column":54},"generated":{"line":1,"column":783}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":45,"column":6},"generated":{"line":1,"column":786}},{"source":"app\\files\\publications.js","name":"log","original":{"line":45,"column":13},"generated":{"line":1,"column":788}},{"source":"app\\files\\publications.js","original":{"line":45,"column":17},"generated":{"line":1,"column":792}},{"source":"app\\files\\publications.js","name":"err","original":{"line":45,"column":26},"generated":{"line":1,"column":800}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":47,"column":15},"generated":{"line":1,"column":805}},{"source":"app\\files\\publications.js","original":{"line":47,"column":23},"generated":{"line":1,"column":813}},{"source":"app\\files\\publications.js","original":{"line":47,"column":23},"generated":{"line":1,"column":819}},{"source":"app\\files\\publications.js","original":{"line":48,"column":12},"generated":{"line":1,"column":823}},{"source":"app\\files\\publications.js","name":"Per_ATID","original":{"line":48,"column":14},"generated":{"line":1,"column":829}},{"source":"app\\files\\publications.js","name":"username","original":{"line":48,"column":24},"generated":{"line":1,"column":838}},{"source":"app\\files\\publications.js","name":"faculty","original":{"line":48,"column":37},"generated":{"line":1,"column":841}},{"source":"app\\files\\publications.js","name":"pubs","original":{"line":49,"column":12},"generated":{"line":1,"column":843}},{"source":"app\\files\\publications.js","name":"_getFacultyPublications","original":{"line":49,"column":25},"generated":{"line":1,"column":851}},{"source":"app\\files\\publications.js","name":"username","original":{"line":49,"column":49},"generated":{"line":1,"column":853}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":49,"column":59},"generated":{"line":1,"column":856}},{"source":"app\\files\\publications.js","name":"error","original":{"line":49,"column":65},"generated":{"line":1,"column":862}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":50,"column":8},"generated":{"line":1,"column":865}},{"source":"app\\files\\publications.js","name":"error","original":{"line":50,"column":15},"generated":{"line":1,"column":872}},{"source":"app\\files\\publications.js","name":"username","original":{"line":52,"column":31},"generated":{"line":1,"column":876}},{"source":"app\\files\\publications.js","name":"username","original":{"line":52,"column":31},"generated":{"line":1,"column":878}},{"source":"app\\files\\publications.js","name":"pubs","original":{"line":52,"column":41},"generated":{"line":1,"column":880}},{"source":"app\\files\\publications.js","original":{"line":57,"column":0},"generated":{"line":1,"column":887}},{"source":"app\\files\\publications.js","name":"_getFacultyArticles","original":{"line":57,"column":6},"generated":{"line":1,"column":893}},{"source":"app\\files\\publications.js","name":"username","original":{"line":57,"column":28},"generated":{"line":1,"column":895}},{"source":"app\\files\\publications.js","original":{"line":58,"column":9},"generated":{"line":1,"column":898}},{"source":"app\\files\\publications.js","name":"Promise","original":{"line":58,"column":13},"generated":{"line":1,"column":902}},{"source":"app\\files\\publications.js","original":{"line":58,"column":21},"generated":{"line":1,"column":910}},{"source":"app\\files\\publications.js","name":"resolve","original":{"line":58,"column":22},"generated":{"line":1,"column":911}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":58,"column":31},"generated":{"line":1,"column":913}},{"source":"app\\files\\publications.js","name":"findAll","original":{"line":59,"column":16},"generated":{"line":1,"column":918}},{"source":"app\\files\\publications.js","name":"findAll","original":{"line":59,"column":16},"generated":{"line":1,"column":920}},{"source":"app\\files\\publications.js","original":{"line":59,"column":24},"generated":{"line":1,"column":928}},{"source":"app\\files\\publications.js","original":{"line":60,"column":13},"generated":{"line":1,"column":929}},{"source":"app\\files\\publications.js","original":{"line":60,"column":13},"generated":{"line":1,"column":935}},{"source":"app\\files\\publications.js","original":{"line":60,"column":14},"generated":{"line":1,"column":936}},{"source":"app\\files\\publications.js","original":{"line":60,"column":15},"generated":{"line":1,"column":937}},{"source":"app\\files\\publications.js","original":{"line":60,"column":27},"generated":{"line":1,"column":948}},{"source":"app\\files\\publications.js","original":{"line":61,"column":15},"generated":{"line":1,"column":957}},{"source":"app\\files\\publications.js","original":{"line":61,"column":15},"generated":{"line":1,"column":965}},{"source":"app\\files\\publications.js","original":{"line":62,"column":8},"generated":{"line":1,"column":966}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":63,"column":17},"generated":{"line":1,"column":967}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":63,"column":17},"generated":{"line":1,"column":973}},{"source":"app\\files\\publications.js","original":{"line":64,"column":17},"generated":{"line":1,"column":975}},{"source":"app\\files\\publications.js","original":{"line":64,"column":17},"generated":{"line":1,"column":981}},{"source":"app\\files\\publications.js","name":"username","original":{"line":65,"column":22},"generated":{"line":1,"column":982}},{"source":"app\\files\\publications.js","name":"username","original":{"line":65,"column":22},"generated":{"line":1,"column":991}},{"source":"app\\files\\publications.js","original":{"line":67,"column":14},"generated":{"line":1,"column":994}},{"source":"app\\files\\publications.js","original":{"line":67,"column":14},"generated":{"line":1,"column":997}},{"source":"app\\files\\publications.js","name":"then","original":{"line":71,"column":7},"generated":{"line":1,"column":1011}},{"source":"app\\files\\publications.js","name":"array","original":{"line":71,"column":12},"generated":{"line":1,"column":1016}},{"source":"app\\files\\publications.js","name":"listOFCodes","original":{"line":72,"column":12},"generated":{"line":1,"column":1020}},{"source":"app\\files\\publications.js","name":"listOFCodes","original":{"line":72,"column":12},"generated":{"line":1,"column":1024}},{"source":"app\\files\\publications.js","original":{"line":72,"column":26},"generated":{"line":1,"column":1026}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":73,"column":14},"generated":{"line":1,"column":1029}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":73,"column":14},"generated":{"line":1,"column":1031}},{"source":"app\\files\\publications.js","name":"one","original":{"line":73,"column":22},"generated":{"line":1,"column":1039}},{"source":"app\\files\\publications.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1043}},{"source":"app\\files\\publications.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1049}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":74,"column":18},"generated":{"line":1,"column":1058}},{"source":"app\\files\\publications.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1060}},{"source":"app\\files\\publications.js","name":"PUB_IEEE","original":{"line":74,"column":28},"generated":{"line":1,"column":1069}},{"source":"app\\files\\publications.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1071}},{"source":"app\\files\\publications.js","name":"PUB_CODE","original":{"line":74,"column":38},"generated":{"line":1,"column":1080}},{"source":"app\\files\\publications.js","name":"one","original":{"line":74,"column":51},"generated":{"line":1,"column":1083}},{"source":"app\\files\\publications.js","name":"tempObj","original":{"line":75,"column":16},"generated":{"line":1,"column":1085}},{"source":"app\\files\\publications.js","original":{"line":75,"column":26},"generated":{"line":1,"column":1087}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":76,"column":18},"generated":{"line":1,"column":1088}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":76,"column":18},"generated":{"line":1,"column":1093}},{"source":"app\\files\\publications.js","name":"PUB_IEEE","original":{"line":77,"column":19},"generated":{"line":1,"column":1095}},{"source":"app\\files\\publications.js","name":"PUB_IEEE","original":{"line":77,"column":19},"generated":{"line":1,"column":1101}},{"source":"app\\files\\publications.js","name":"PUB_CODE","original":{"line":78,"column":18},"generated":{"line":1,"column":1103}},{"source":"app\\files\\publications.js","name":"PUB_CODE","original":{"line":78,"column":18},"generated":{"line":1,"column":1108}},{"source":"app\\files\\publications.js","original":{"line":79,"column":21},"generated":{"line":1,"column":1110}},{"source":"app\\files\\publications.js","original":{"line":79,"column":21},"generated":{"line":1,"column":1118}},{"source":"app\\files\\publications.js","name":"push","original":{"line":81,"column":22},"generated":{"line":1,"column":1122}},{"source":"app\\files\\publications.js","name":"push","original":{"line":81,"column":22},"generated":{"line":1,"column":1124}},{"source":"app\\files\\publications.js","name":"tempObj","original":{"line":81,"column":27},"generated":{"line":1,"column":1129}},{"source":"app\\files\\publications.js","name":"listOFCodes","original":{"line":83,"column":16},"generated":{"line":1,"column":1134}},{"source":"app\\files\\publications.js","name":"listOFCodes","original":{"line":83,"column":16},"generated":{"line":1,"column":1136}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":85,"column":7},"generated":{"line":1,"column":1141}},{"source":"app\\files\\publications.js","name":"error","original":{"line":85,"column":13},"generated":{"line":1,"column":1147}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":85,"column":22},"generated":{"line":1,"column":1150}},{"source":"app\\files\\publications.js","name":"error","original":{"line":85,"column":29},"generated":{"line":1,"column":1152}},{"source":"app\\files\\publications.js","name":"_getAllOtherAuthors","original":{"line":89,"column":6},"generated":{"line":1,"column":1158}},{"source":"app\\files\\publications.js","name":"code","original":{"line":89,"column":28},"generated":{"line":1,"column":1160}},{"source":"app\\files\\publications.js","name":"sequelize","original":{"line":90,"column":9},"generated":{"line":1,"column":1163}},{"source":"app\\files\\publications.js","name":"query","original":{"line":90,"column":19},"generated":{"line":1,"column":1165}},{"source":"app\\files\\publications.js","original":{"line":90,"column":26},"generated":{"line":1,"column":1171}},{"source":"app\\files\\publications.js","original":{"line":90,"column":73},"generated":{"line":1,"column":1218}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":91,"column":11},"generated":{"line":1,"column":1219}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":91,"column":11},"generated":{"line":1,"column":1225}},{"source":"app\\files\\publications.js","name":"_getOtherAuthorsOfArticle","original":{"line":95,"column":6},"generated":{"line":1,"column":1229}},{"source":"app\\files\\publications.js","name":"code","original":{"line":95,"column":34},"generated":{"line":1,"column":1231}},{"source":"app\\files\\publications.js","name":"sequelize","original":{"line":96,"column":9},"generated":{"line":1,"column":1234}},{"source":"app\\files\\publications.js","name":"query","original":{"line":96,"column":19},"generated":{"line":1,"column":1236}},{"source":"app\\files\\publications.js","name":"code","original":{"line":97,"column":57},"generated":{"line":1,"column":1295}},{"source":"app\\files\\publications.js","original":{"line":98,"column":4},"generated":{"line":1,"column":1299}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":99,"column":13},"generated":{"line":1,"column":1300}},{"source":"app\\files\\publications.js","name":"Author","original":{"line":99,"column":13},"generated":{"line":1,"column":1306}},{"source":"app\\files\\publications.js","name":"_updateArticleWithOtherAuthors","original":{"line":104,"column":6},"generated":{"line":1,"column":1310}},{"source":"app\\files\\publications.js","original":{"line":104,"column":39},"generated":{"line":1,"column":1312}},{"source":"app\\files\\publications.js","original":{"line":104,"column":39},"generated":{"line":1,"column":1318}},{"source":"app\\files\\publications.js","original":{"line":105,"column":9},"generated":{"line":1,"column":1321}},{"source":"app\\files\\publications.js","name":"Promise","original":{"line":105,"column":13},"generated":{"line":1,"column":1325}},{"source":"app\\files\\publications.js","original":{"line":105,"column":21},"generated":{"line":1,"column":1333}},{"source":"app\\files\\publications.js","name":"res","original":{"line":105,"column":22},"generated":{"line":1,"column":1334}},{"source":"app\\files\\publications.js","name":"rej","original":{"line":105,"column":27},"generated":{"line":1,"column":1336}},{"source":"app\\files\\publications.js","name":"proms","original":{"line":106,"column":8},"generated":{"line":1,"column":1341}},{"source":"app\\files\\publications.js","name":"proms","original":{"line":106,"column":8},"generated":{"line":1,"column":1345}},{"source":"app\\files\\publications.js","original":{"line":106,"column":16},"generated":{"line":1,"column":1347}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":107,"column":13},"generated":{"line":1,"column":1350}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":107,"column":13},"generated":{"line":1,"column":1352}},{"source":"app\\files\\publications.js","original":{"line":107,"column":21},"generated":{"line":1,"column":1360}},{"source":"app\\files\\publications.js","original":{"line":107,"column":21},"generated":{"line":1,"column":1366}},{"source":"app\\files\\publications.js","name":"push","original":{"line":108,"column":12},"generated":{"line":1,"column":1370}},{"source":"app\\files\\publications.js","name":"push","original":{"line":108,"column":12},"generated":{"line":1,"column":1372}},{"source":"app\\files\\publications.js","original":{"line":109,"column":8},"generated":{"line":1,"column":1377}},{"source":"app\\files\\publications.js","name":"Promise","original":{"line":109,"column":12},"generated":{"line":1,"column":1381}},{"source":"app\\files\\publications.js","original":{"line":109,"column":20},"generated":{"line":1,"column":1389}},{"source":"app\\files\\publications.js","name":"resolve","original":{"line":109,"column":27},"generated":{"line":1,"column":1395}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":109,"column":36},"generated":{"line":1,"column":1397}},{"source":"app\\files\\publications.js","name":"others","original":{"line":110,"column":16},"generated":{"line":1,"column":1402}},{"source":"app\\files\\publications.js","name":"others","original":{"line":110,"column":16},"generated":{"line":1,"column":1408}},{"source":"app\\files\\publications.js","name":"_getOtherAuthorsOfArticle","original":{"line":110,"column":31},"generated":{"line":1,"column":1416}},{"source":"app\\files\\publications.js","name":"article","original":{"line":110,"column":57},"generated":{"line":1,"column":1418}},{"source":"app\\files\\publications.js","name":"code","original":{"line":110,"column":65},"generated":{"line":1,"column":1420}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":110,"column":71},"generated":{"line":1,"column":1426}},{"source":"app\\files\\publications.js","name":"error","original":{"line":111,"column":12},"generated":{"line":1,"column":1432}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":111,"column":21},"generated":{"line":1,"column":1435}},{"source":"app\\files\\publications.js","name":"error","original":{"line":111,"column":28},"generated":{"line":1,"column":1437}},{"source":"app\\files\\publications.js","original":{"line":113,"column":18},"generated":{"line":1,"column":1441}},{"source":"app\\files\\publications.js","original":{"line":113,"column":18},"generated":{"line":1,"column":1443}},{"source":"app\\files\\publications.js","original":{"line":113,"column":18},"generated":{"line":1,"column":1444}},{"source":"app\\files\\publications.js","original":{"line":113,"column":18},"generated":{"line":1,"column":1452}},{"source":"app\\files\\publications.js","name":"others","original":{"line":115,"column":12},"generated":{"line":1,"column":1454}},{"source":"app\\files\\publications.js","name":"others","original":{"line":115,"column":12},"generated":{"line":1,"column":1461}},{"source":"app\\files\\publications.js","name":"all","original":{"line":120,"column":12},"generated":{"line":1,"column":1470}},{"source":"app\\files\\publications.js","name":"all","original":{"line":120,"column":12},"generated":{"line":1,"column":1478}},{"source":"app\\files\\publications.js","name":"proms","original":{"line":120,"column":16},"generated":{"line":1,"column":1482}},{"source":"app\\files\\publications.js","name":"then","original":{"line":121,"column":7},"generated":{"line":1,"column":1485}},{"source":"app\\files\\publications.js","name":"array","original":{"line":121,"column":12},"generated":{"line":1,"column":1490}},{"source":"app\\files\\publications.js","name":"list","original":{"line":122,"column":12},"generated":{"line":1,"column":1494}},{"source":"app\\files\\publications.js","name":"list","original":{"line":122,"column":12},"generated":{"line":1,"column":1498}},{"source":"app\\files\\publications.js","original":{"line":122,"column":19},"generated":{"line":1,"column":1500}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":123,"column":14},"generated":{"line":1,"column":1503}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":123,"column":14},"generated":{"line":1,"column":1505}},{"source":"app\\files\\publications.js","name":"item","original":{"line":123,"column":22},"generated":{"line":1,"column":1513}},{"source":"app\\files\\publications.js","original":{"line":124,"column":16},"generated":{"line":1,"column":1517}},{"source":"app\\files\\publications.js","original":{"line":124,"column":16},"generated":{"line":1,"column":1523}},{"source":"app\\files\\publications.js","name":"article","original":{"line":124,"column":18},"generated":{"line":1,"column":1531}},{"source":"app\\files\\publications.js","original":{"line":124,"column":16},"generated":{"line":1,"column":1533}},{"source":"app\\files\\publications.js","name":"others","original":{"line":124,"column":27},"generated":{"line":1,"column":1540}},{"source":"app\\files\\publications.js","name":"item","original":{"line":124,"column":38},"generated":{"line":1,"column":1543}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":125,"column":17},"generated":{"line":1,"column":1545}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":125,"column":17},"generated":{"line":1,"column":1547}},{"source":"app\\files\\publications.js","name":"author","original":{"line":125,"column":25},"generated":{"line":1,"column":1555}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":126,"column":20},"generated":{"line":1,"column":1559}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":126,"column":20},"generated":{"line":1,"column":1561}},{"source":"app\\files\\publications.js","name":"push","original":{"line":126,"column":28},"generated":{"line":1,"column":1569}},{"source":"app\\files\\publications.js","name":"author","original":{"line":126,"column":33},"generated":{"line":1,"column":1574}},{"source":"app\\files\\publications.js","name":"get","original":{"line":126,"column":40},"generated":{"line":1,"column":1576}},{"source":"app\\files\\publications.js","original":{"line":126,"column":44},"generated":{"line":1,"column":1580}},{"source":"app\\files\\publications.js","name":"push","original":{"line":128,"column":15},"generated":{"line":1,"column":1595}},{"source":"app\\files\\publications.js","name":"push","original":{"line":128,"column":15},"generated":{"line":1,"column":1597}},{"source":"app\\files\\publications.js","name":"article","original":{"line":128,"column":20},"generated":{"line":1,"column":1602}},{"source":"app\\files\\publications.js","name":"list","original":{"line":130,"column":12},"generated":{"line":1,"column":1607}},{"source":"app\\files\\publications.js","name":"list","original":{"line":130,"column":12},"generated":{"line":1,"column":1609}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":132,"column":7},"generated":{"line":1,"column":1614}},{"source":"app\\files\\publications.js","name":"err","original":{"line":132,"column":13},"generated":{"line":1,"column":1620}},{"source":"app\\files\\publications.js","name":"rej","original":{"line":132,"column":20},"generated":{"line":1,"column":1623}},{"source":"app\\files\\publications.js","name":"err","original":{"line":132,"column":24},"generated":{"line":1,"column":1625}},{"source":"app\\files\\publications.js","name":"_getFacultyPublications","original":{"line":136,"column":6},"generated":{"line":1,"column":1631}},{"source":"app\\files\\publications.js","original":{"line":136,"column":32},"generated":{"line":1,"column":1633}},{"source":"app\\files\\publications.js","original":{"line":136,"column":32},"generated":{"line":1,"column":1639}},{"source":"app\\files\\publications.js","original":{"line":137,"column":9},"generated":{"line":1,"column":1642}},{"source":"app\\files\\publications.js","name":"Promise","original":{"line":137,"column":13},"generated":{"line":1,"column":1646}},{"source":"app\\files\\publications.js","original":{"line":137,"column":21},"generated":{"line":1,"column":1654}},{"source":"app\\files\\publications.js","name":"resolve","original":{"line":137,"column":28},"generated":{"line":1,"column":1660}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":137,"column":37},"generated":{"line":1,"column":1662}},{"source":"app\\files\\publications.js","name":"articles","original":{"line":138,"column":10},"generated":{"line":1,"column":1667}},{"source":"app\\files\\publications.js","name":"articles","original":{"line":138,"column":10},"generated":{"line":1,"column":1673}},{"source":"app\\files\\publications.js","name":"_getFacultyArticles","original":{"line":138,"column":27},"generated":{"line":1,"column":1681}},{"source":"app\\files\\publications.js","name":"username","original":{"line":138,"column":47},"generated":{"line":1,"column":1683}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":138,"column":57},"generated":{"line":1,"column":1686}},{"source":"app\\files\\publications.js","name":"error","original":{"line":138,"column":63},"generated":{"line":1,"column":1692}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":139,"column":6},"generated":{"line":1,"column":1695}},{"source":"app\\files\\publications.js","name":"error","original":{"line":139,"column":13},"generated":{"line":1,"column":1697}},{"source":"app\\files\\publications.js","name":"list","original":{"line":144,"column":12},"generated":{"line":1,"column":1701}},{"source":"app\\files\\publications.js","name":"_updateArticleWithOtherAuthors","original":{"line":141,"column":23},"generated":{"line":1,"column":1709}},{"source":"app\\files\\publications.js","name":"articles","original":{"line":141,"column":54},"generated":{"line":1,"column":1711}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":141,"column":64},"generated":{"line":1,"column":1714}},{"source":"app\\files\\publications.js","name":"error","original":{"line":141,"column":70},"generated":{"line":1,"column":1720}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":142,"column":6},"generated":{"line":1,"column":1723}},{"source":"app\\files\\publications.js","name":"error","original":{"line":142,"column":13},"generated":{"line":1,"column":1725}},{"source":"app\\files\\publications.js","name":"_saveFacultyPublications","original":{"line":148,"column":6},"generated":{"line":1,"column":1732}},{"source":"app\\files\\publications.js","original":{"line":148,"column":33},"generated":{"line":1,"column":1734}},{"source":"app\\files\\publications.js","name":"username","original":{"line":148,"column":40},"generated":{"line":1,"column":1740}},{"source":"app\\files\\publications.js","name":"list","original":{"line":148,"column":50},"generated":{"line":1,"column":1742}},{"source":"app\\files\\publications.js","name":"data","original":{"line":149,"column":8},"generated":{"line":1,"column":1747}},{"source":"app\\files\\publications.js","name":"data","original":{"line":149,"column":8},"generated":{"line":1,"column":1753}},{"source":"app\\files\\publications.js","name":"JSON","original":{"line":149,"column":15},"generated":{"line":1,"column":1755}},{"source":"app\\files\\publications.js","name":"stringify","original":{"line":149,"column":20},"generated":{"line":1,"column":1760}},{"source":"app\\files\\publications.js","name":"list","original":{"line":149,"column":30},"generated":{"line":1,"column":1770}},{"source":"app\\files\\publications.js","name":"username","original":{"line":150,"column":12},"generated":{"line":1,"column":1773}},{"source":"app\\files\\publications.js","name":"username","original":{"line":150,"column":12},"generated":{"line":1,"column":1775}},{"source":"app\\files\\publications.js","original":{"line":150,"column":22},"generated":{"line":1,"column":1777}},{"source":"app\\files\\publications.js","name":"data","original":{"line":150,"column":46},"generated":{"line":1,"column":1800}},{"source":"app\\files\\publications.js","name":"_getPublicationsYears","original":{"line":153,"column":6},"generated":{"line":1,"column":1804}},{"source":"app\\files\\publications.js","original":{"line":153,"column":30},"generated":{"line":1,"column":1806}},{"source":"app\\files\\publications.js","name":"sequelize","original":{"line":154,"column":9},"generated":{"line":1,"column":1810}},{"source":"app\\files\\publications.js","name":"query","original":{"line":154,"column":19},"generated":{"line":1,"column":1812}},{"source":"app\\files\\publications.js","original":{"line":155,"column":4},"generated":{"line":1,"column":1818}},{"source":"app\\files\\publications.js","original":{"line":156,"column":4},"generated":{"line":1,"column":1895}},{"source":"app\\files\\publications.js","name":"Publication","original":{"line":157,"column":13},"generated":{"line":1,"column":1896}},{"source":"app\\files\\publications.js","name":"Publication","original":{"line":157,"column":13},"generated":{"line":1,"column":1902}},{"source":"app\\files\\publications.js","name":"_getPublicationsArray","original":{"line":161,"column":6},"generated":{"line":1,"column":1906}},{"source":"app\\files\\publications.js","original":{"line":161,"column":30},"generated":{"line":1,"column":1908}},{"source":"app\\files\\publications.js","name":"years","original":{"line":162,"column":8},"generated":{"line":1,"column":1918}},{"source":"app\\files\\publications.js","name":"years","original":{"line":162,"column":8},"generated":{"line":1,"column":1924}},{"source":"app\\files\\publications.js","name":"_getPublicationsYears","original":{"line":162,"column":22},"generated":{"line":1,"column":1932}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":162,"column":46},"generated":{"line":1,"column":1936}},{"source":"app\\files\\publications.js","name":"err","original":{"line":162,"column":52},"generated":{"line":1,"column":1942}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":163,"column":4},"generated":{"line":1,"column":1945}},{"source":"app\\files\\publications.js","name":"log","original":{"line":163,"column":11},"generated":{"line":1,"column":1947}},{"source":"app\\files\\publications.js","original":{"line":163,"column":15},"generated":{"line":1,"column":1951}},{"source":"app\\files\\publications.js","name":"err","original":{"line":163,"column":24},"generated":{"line":1,"column":1959}},{"source":"app\\files\\publications.js","name":"array","original":{"line":165,"column":6},"generated":{"line":1,"column":1963}},{"source":"app\\files\\publications.js","name":"array","original":{"line":165,"column":6},"generated":{"line":1,"column":1967}},{"source":"app\\files\\publications.js","original":{"line":165,"column":14},"generated":{"line":1,"column":1969}},{"source":"app\\files\\publications.js","name":"array","original":{"line":170,"column":9},"generated":{"line":1,"column":1972}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":166,"column":8},"generated":{"line":1,"column":1979}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":166,"column":8},"generated":{"line":1,"column":1981}},{"source":"app\\files\\publications.js","name":"year","original":{"line":166,"column":16},"generated":{"line":1,"column":1989}},{"source":"app\\files\\publications.js","original":{"line":167,"column":10},"generated":{"line":1,"column":1993}},{"source":"app\\files\\publications.js","original":{"line":167,"column":10},"generated":{"line":1,"column":1999}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":167,"column":12},"generated":{"line":1,"column":2008}},{"source":"app\\files\\publications.js","name":"year","original":{"line":167,"column":25},"generated":{"line":1,"column":2011}},{"source":"app\\files\\publications.js","name":"push","original":{"line":168,"column":10},"generated":{"line":1,"column":2013}},{"source":"app\\files\\publications.js","name":"push","original":{"line":168,"column":10},"generated":{"line":1,"column":2015}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":168,"column":15},"generated":{"line":1,"column":2020}},{"source":"app\\files\\publications.js","name":"array","original":{"line":170,"column":9},"generated":{"line":1,"column":2025}},{"source":"app\\files\\publications.js","name":"_getPublications","original":{"line":173,"column":6},"generated":{"line":1,"column":2028}},{"source":"app\\files\\publications.js","original":{"line":173,"column":25},"generated":{"line":1,"column":2030}},{"source":"app\\files\\publications.js","name":"year","original":{"line":173,"column":26},"generated":{"line":1,"column":2031}},{"source":"app\\files\\publications.js","original":{"line":173,"column":33},"generated":{"line":1,"column":2033}},{"source":"app\\files\\publications.js","name":"where","original":{"line":174,"column":8},"generated":{"line":1,"column":2041}},{"source":"app\\files\\publications.js","name":"where","original":{"line":174,"column":8},"generated":{"line":1,"column":2047}},{"source":"app\\files\\publications.js","original":{"line":174,"column":16},"generated":{"line":1,"column":2049}},{"source":"app\\files\\publications.js","name":"Publication","original":{"line":178,"column":9},"generated":{"line":1,"column":2052}},{"source":"app\\files\\publications.js","name":"year","original":{"line":175,"column":6},"generated":{"line":1,"column":2059}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":176,"column":10},"generated":{"line":1,"column":2063}},{"source":"app\\files\\publications.js","name":"PUB_Year","original":{"line":176,"column":10},"generated":{"line":1,"column":2065}},{"source":"app\\files\\publications.js","name":"year","original":{"line":176,"column":21},"generated":{"line":1,"column":2074}},{"source":"app\\files\\publications.js","name":"Publication","original":{"line":178,"column":9},"generated":{"line":1,"column":2077}},{"source":"app\\files\\publications.js","name":"findAll","original":{"line":178,"column":21},"generated":{"line":1,"column":2079}},{"source":"app\\files\\publications.js","original":{"line":178,"column":29},"generated":{"line":1,"column":2087}},{"source":"app\\files\\publications.js","name":"where","original":{"line":179,"column":4},"generated":{"line":1,"column":2088}},{"source":"app\\files\\publications.js","name":"where","original":{"line":179,"column":4},"generated":{"line":1,"column":2094}},{"source":"app\\files\\publications.js","name":"_savePublications","original":{"line":183,"column":6},"generated":{"line":1,"column":2099}},{"source":"app\\files\\publications.js","original":{"line":183,"column":26},"generated":{"line":1,"column":2101}},{"source":"app\\files\\publications.js","name":"year","original":{"line":183,"column":33},"generated":{"line":1,"column":2107}},{"source":"app\\files\\publications.js","original":{"line":183,"column":40},"generated":{"line":1,"column":2109}},{"source":"app\\files\\publications.js","name":"articles","original":{"line":184,"column":8},"generated":{"line":1,"column":2117}},{"source":"app\\files\\publications.js","name":"articles","original":{"line":184,"column":8},"generated":{"line":1,"column":2123}},{"source":"app\\files\\publications.js","name":"_getPublications","original":{"line":184,"column":25},"generated":{"line":1,"column":2131}},{"source":"app\\files\\publications.js","name":"year","original":{"line":184,"column":42},"generated":{"line":1,"column":2133}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":184,"column":48},"generated":{"line":1,"column":2136}},{"source":"app\\files\\publications.js","name":"err","original":{"line":184,"column":54},"generated":{"line":1,"column":2142}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":185,"column":4},"generated":{"line":1,"column":2145}},{"source":"app\\files\\publications.js","name":"log","original":{"line":185,"column":11},"generated":{"line":1,"column":2147}},{"source":"app\\files\\publications.js","original":{"line":185,"column":15},"generated":{"line":1,"column":2151}},{"source":"app\\files\\publications.js","name":"err","original":{"line":185,"column":24},"generated":{"line":1,"column":2159}},{"source":"app\\files\\publications.js","name":"array","original":{"line":187,"column":6},"generated":{"line":1,"column":2163}},{"source":"app\\files\\publications.js","name":"array","original":{"line":187,"column":6},"generated":{"line":1,"column":2167}},{"source":"app\\files\\publications.js","original":{"line":187,"column":14},"generated":{"line":1,"column":2169}},{"source":"app\\files\\publications.js","name":"promises","original":{"line":188,"column":6},"generated":{"line":1,"column":2172}},{"source":"app\\files\\publications.js","original":{"line":188,"column":17},"generated":{"line":1,"column":2174}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":189,"column":11},"generated":{"line":1,"column":2177}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":189,"column":11},"generated":{"line":1,"column":2179}},{"source":"app\\files\\publications.js","original":{"line":189,"column":19},"generated":{"line":1,"column":2187}},{"source":"app\\files\\publications.js","original":{"line":189,"column":19},"generated":{"line":1,"column":2193}},{"source":"app\\files\\publications.js","original":{"line":190,"column":10},"generated":{"line":1,"column":2197}},{"source":"app\\files\\publications.js","name":"PUB_IEEE","original":{"line":190,"column":12},"generated":{"line":1,"column":2203}},{"source":"app\\files\\publications.js","name":"title","original":{"line":190,"column":22},"generated":{"line":1,"column":2212}},{"source":"app\\files\\publications.js","name":"PUB_CODE","original":{"line":190,"column":29},"generated":{"line":1,"column":2214}},{"source":"app\\files\\publications.js","name":"code","original":{"line":190,"column":39},"generated":{"line":1,"column":2223}},{"source":"app\\files\\publications.js","name":"article","original":{"line":190,"column":48},"generated":{"line":1,"column":2226}},{"source":"app\\files\\publications.js","name":"push","original":{"line":192,"column":13},"generated":{"line":1,"column":2228}},{"source":"app\\files\\publications.js","name":"push","original":{"line":192,"column":13},"generated":{"line":1,"column":2230}},{"source":"app\\files\\publications.js","original":{"line":192,"column":18},"generated":{"line":1,"column":2235}},{"source":"app\\files\\publications.js","name":"year","original":{"line":192,"column":20},"generated":{"line":1,"column":2236}},{"source":"app\\files\\publications.js","name":"year","original":{"line":192,"column":20},"generated":{"line":1,"column":2241}},{"source":"app\\files\\publications.js","name":"title","original":{"line":192,"column":26},"generated":{"line":1,"column":2243}},{"source":"app\\files\\publications.js","name":"title","original":{"line":192,"column":26},"generated":{"line":1,"column":2249}},{"source":"app\\files\\publications.js","name":"code","original":{"line":192,"column":33},"generated":{"line":1,"column":2251}},{"source":"app\\files\\publications.js","name":"code","original":{"line":192,"column":33},"generated":{"line":1,"column":2256}},{"source":"app\\files\\publications.js","name":"all","original":{"line":194,"column":10},"generated":{"line":1,"column":2262}},{"source":"app\\files\\publications.js","name":"all","original":{"line":194,"column":10},"generated":{"line":1,"column":2270}},{"source":"app\\files\\publications.js","name":"promises","original":{"line":194,"column":14},"generated":{"line":1,"column":2274}},{"source":"app\\files\\publications.js","name":"then","original":{"line":195,"column":5},"generated":{"line":1,"column":2277}},{"source":"app\\files\\publications.js","name":"tempArray","original":{"line":195,"column":10},"generated":{"line":1,"column":2282}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":196,"column":16},"generated":{"line":1,"column":2286}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":196,"column":16},"generated":{"line":1,"column":2288}},{"source":"app\\files\\publications.js","name":"art","original":{"line":196,"column":24},"generated":{"line":1,"column":2296}},{"source":"app\\files\\publications.js","name":"array","original":{"line":196,"column":31},"generated":{"line":1,"column":2299}},{"source":"app\\files\\publications.js","name":"push","original":{"line":196,"column":37},"generated":{"line":1,"column":2301}},{"source":"app\\files\\publications.js","name":"art","original":{"line":196,"column":42},"generated":{"line":1,"column":2306}},{"source":"app\\files\\publications.js","name":"year","original":{"line":197,"column":16},"generated":{"line":1,"column":2310}},{"source":"app\\files\\publications.js","name":"year","original":{"line":197,"column":16},"generated":{"line":1,"column":2312}},{"source":"app\\files\\publications.js","original":{"line":197,"column":22},"generated":{"line":1,"column":2314}},{"source":"app\\files\\publications.js","name":"JSON","original":{"line":197,"column":38},"generated":{"line":1,"column":2329}},{"source":"app\\files\\publications.js","name":"stringify","original":{"line":197,"column":43},"generated":{"line":1,"column":2334}},{"source":"app\\files\\publications.js","name":"array","original":{"line":197,"column":53},"generated":{"line":1,"column":2344}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":199,"column":5},"generated":{"line":1,"column":2350}},{"source":"app\\files\\publications.js","name":"err","original":{"line":199,"column":11},"generated":{"line":1,"column":2356}},{"source":"app\\files\\publications.js","name":"logger","original":{"line":199,"column":18},"generated":{"line":1,"column":2359}},{"source":"app\\files\\publications.js","name":"log","original":{"line":199,"column":25},"generated":{"line":1,"column":2361}},{"source":"app\\files\\publications.js","original":{"line":199,"column":29},"generated":{"line":1,"column":2365}},{"source":"app\\files\\publications.js","name":"err","original":{"line":199,"column":38},"generated":{"line":1,"column":2373}},{"source":"app\\files\\publications.js","name":"_getArticleWithAuthors","original":{"line":202,"column":6},"generated":{"line":1,"column":2378}},{"source":"app\\files\\publications.js","original":{"line":202,"column":31},"generated":{"line":1,"column":2380}},{"source":"app\\files\\publications.js","name":"year","original":{"line":202,"column":38},"generated":{"line":1,"column":2386}},{"source":"app\\files\\publications.js","name":"title","original":{"line":202,"column":44},"generated":{"line":1,"column":2388}},{"source":"app\\files\\publications.js","name":"code","original":{"line":202,"column":51},"generated":{"line":1,"column":2390}},{"source":"app\\files\\publications.js","original":{"line":203,"column":9},"generated":{"line":1,"column":2394}},{"source":"app\\files\\publications.js","name":"Promise","original":{"line":203,"column":13},"generated":{"line":1,"column":2398}},{"source":"app\\files\\publications.js","original":{"line":203,"column":21},"generated":{"line":1,"column":2406}},{"source":"app\\files\\publications.js","name":"resolve","original":{"line":203,"column":28},"generated":{"line":1,"column":2412}},{"source":"app\\files\\publications.js","name":"reject","original":{"line":203,"column":37},"generated":{"line":1,"column":2414}},{"source":"app\\files\\publications.js","name":"others","original":{"line":204,"column":10},"generated":{"line":1,"column":2419}},{"source":"app\\files\\publications.js","name":"others","original":{"line":204,"column":10},"generated":{"line":1,"column":2425}},{"source":"app\\files\\publications.js","name":"_getOtherAuthorsOfArticle","original":{"line":204,"column":25},"generated":{"line":1,"column":2433}},{"source":"app\\files\\publications.js","name":"code","original":{"line":204,"column":51},"generated":{"line":1,"column":2435}},{"source":"app\\files\\publications.js","name":"catch","original":{"line":204,"column":57},"generated":{"line":1,"column":2438}},{"source":"app\\files\\publications.js","name":"err","original":{"line":204,"column":63},"generated":{"line":1,"column":2444}},{"source":"app\\files\\publications.js","name":"log","original":{"line":205,"column":13},"generated":{"line":1,"column":2448}},{"source":"app\\files\\publications.js","name":"log","original":{"line":205,"column":13},"generated":{"line":1,"column":2450}},{"source":"app\\files\\publications.js","original":{"line":205,"column":17},"generated":{"line":1,"column":2454}},{"source":"app\\files\\publications.js","name":"err","original":{"line":205,"column":26},"generated":{"line":1,"column":2462}},{"source":"app\\files\\publications.js","original":{"line":206,"column":13},"generated":{"line":1,"column":2465}},{"source":"app\\files\\publications.js","original":{"line":206,"column":13},"generated":{"line":1,"column":2467}},{"source":"app\\files\\publications.js","name":"temp","original":{"line":208,"column":10},"generated":{"line":1,"column":2497}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2499}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2500}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2506}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2508}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2513}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2515}},{"source":"app\\files\\publications.js","original":{"line":208,"column":17},"generated":{"line":1,"column":2520}},{"source":"app\\files\\publications.js","original":{"line":212,"column":15},"generated":{"line":1,"column":2522}},{"source":"app\\files\\publications.js","original":{"line":212,"column":15},"generated":{"line":1,"column":2530}},{"source":"app\\files\\publications.js","name":"others","original":{"line":214,"column":8},"generated":{"line":1,"column":2534}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":215,"column":13},"generated":{"line":1,"column":2537}},{"source":"app\\files\\publications.js","name":"forEach","original":{"line":215,"column":13},"generated":{"line":1,"column":2539}},{"source":"app\\files\\publications.js","name":"author","original":{"line":215,"column":21},"generated":{"line":1,"column":2547}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":216,"column":13},"generated":{"line":1,"column":2551}},{"source":"app\\files\\publications.js","name":"authors","original":{"line":216,"column":13},"generated":{"line":1,"column":2553}},{"source":"app\\files\\publications.js","name":"push","original":{"line":216,"column":21},"generated":{"line":1,"column":2561}},{"source":"app\\files\\publications.js","name":"author","original":{"line":216,"column":26},"generated":{"line":1,"column":2566}},{"source":"app\\files\\publications.js","name":"get","original":{"line":216,"column":33},"generated":{"line":1,"column":2568}},{"source":"app\\files\\publications.js","original":{"line":216,"column":37},"generated":{"line":1,"column":2572}},{"source":"app\\files\\publications.js","name":"temp","original":{"line":219,"column":12},"generated":{"line":1,"column":2587}},{"source":"app\\files\\publications.js","name":"temp","original":{"line":219,"column":12},"generated":{"line":1,"column":2589}}],"sources":{"app\\files\\publications.js":"const fs = require('fs')\r\nconst logger = require('./logger')\r\nconst sequelize = require('../models/Base')\r\nconst Publication = require('../models/Publication')\r\nconst Author = require('../models/Author')\r\nconst { getActiveFaculty } = require('./faculty.js')\r\nconst { createFolder, saveFiles } = require('./general.js')\r\nmodule.exports = {\r\n  async saveAllOtherAuthors() {\r\n    const others = await _getAllOtherAuthors()\r\n    let authors = {}\r\n    others.forEach(author => {\r\n      const { AUT_PubCode, AUT_NAME } = author\r\n      if (!authors[AUT_PubCode]) {\r\n        authors[AUT_PubCode] = []\r\n      }\r\n      authors[AUT_PubCode].push(AUT_NAME)\r\n    })\r\n    saveFiles('other_authors', 'publications', JSON.stringify(authors))\r\n  },\r\n  async savePublications() {\r\n    const years = await _getPublicationsArray().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    years.forEach(year => {\r\n      _savePublications(year)\r\n    })\r\n  },\r\n  async savePublicationsYears() {\r\n    const years = await _getPublicationsYears().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    let yearsArr = []\r\n    years.forEach(yearObj => {\r\n      const { PUB_Year: year } = yearObj\r\n      yearsArr.push(year)\r\n    })\r\n    saveFiles('years', 'publications', JSON.stringify(yearsArr))\r\n  },\r\n  async getFacultyPublications(username) {\r\n    return _getFacultyPublications(username)\r\n  },\r\n  async saveFacultyPublications() {\r\n    const facultyArr = await getActiveFaculty().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    facultyArr.forEach(async faculty => {\r\n      const { Per_ATID: username } = faculty\r\n      const pubs = await _getFacultyPublications(username).catch(error =>\r\n        reject(error)\r\n      )\r\n      _saveFacultyPublications(username, pubs)\r\n    })\r\n  }\r\n}\r\n\r\nconst _getFacultyArticles = username => {\r\n  return new Promise((resolve, reject) => {\r\n    Publication.findAll({\r\n      order: [['PUB_Year', 'DESC']],\r\n      include: [\r\n        {\r\n          model: Author,\r\n          where: {\r\n            AUT_ATID: username\r\n          },\r\n          as: 'authors'\r\n        }\r\n      ]\r\n    })\r\n      .then(array => {\r\n        let listOFCodes = []\r\n        array.forEach(one => {\r\n          const { PUB_Year, PUB_IEEE, PUB_CODE } = one\r\n          const tempObj = {\r\n            year: PUB_Year,\r\n            title: PUB_IEEE,\r\n            code: PUB_CODE,\r\n            authors: []\r\n          }\r\n          listOFCodes.push(tempObj)\r\n        })\r\n        resolve(listOFCodes)\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nconst _getAllOtherAuthors = code => {\r\n  return sequelize.query(`select AUT_PubCode, AUT_NAME from PubAuthors`, {\r\n    model: Author\r\n  })\r\n}\r\n\r\nconst _getOtherAuthorsOfArticle = code => {\r\n  return sequelize.query(\r\n    `select AUT_NAME from PubAuthors where AUT_PubCode=${code}`,\r\n    {\r\n      model: Author\r\n    }\r\n  )\r\n}\r\n\r\nconst _updateArticleWithOtherAuthors = async articles => {\r\n  return new Promise((res, rej) => {\r\n    let proms = []\r\n    articles.forEach(async article => {\r\n      proms.push(\r\n        new Promise(async (resolve, reject) => {\r\n          const others = await _getOtherAuthorsOfArticle(article.code).catch(\r\n            error => reject(error)\r\n          )\r\n          resolve({\r\n            article,\r\n            others\r\n          })\r\n        })\r\n      )\r\n    })\r\n    Promise.all(proms)\r\n      .then(array => {\r\n        let list = []\r\n        array.forEach(item => {\r\n          const { article, others } = item\r\n          others.forEach(author => {\r\n            article.authors.push(author.get('AUT_NAME'))\r\n          })\r\n          list.push(article)\r\n        })\r\n        res(list)\r\n      })\r\n      .catch(err => rej(err))\r\n  })\r\n}\r\n\r\nconst _getFacultyPublications = async username => {\r\n  return new Promise(async (resolve, reject) => {\r\n    const articles = await _getFacultyArticles(username).catch(error =>\r\n      reject(error)\r\n    )\r\n    const list = await _updateArticleWithOtherAuthors(articles).catch(error =>\r\n      reject(error)\r\n    )\r\n    resolve(list)\r\n  })\r\n}\r\n\r\nconst _saveFacultyPublications = async (username, list) => {\r\n  const data = JSON.stringify(list)\r\n  saveFiles(username, 'faculty/publications', data)\r\n}\r\n\r\nconst _getPublicationsYears = () => {\r\n  return sequelize.query(\r\n    \"select distinct PUB_Year from PubWork where PUB_Year<>'' order by PUB_Year\",\r\n    {\r\n      model: Publication\r\n    }\r\n  )\r\n}\r\nconst _getPublicationsArray = async () => {\r\n  const years = await _getPublicationsYears().catch(err =>\r\n    logger.log('error', err)\r\n  )\r\n  let array = []\r\n  years.forEach(year => {\r\n    const { PUB_Year } = year\r\n    array.push(PUB_Year)\r\n  })\r\n  return array\r\n}\r\n\r\nconst _getPublications = (year = null) => {\r\n  const where = {}\r\n  if (year) {\r\n    where.PUB_Year = year\r\n  }\r\n  return Publication.findAll({\r\n    where\r\n  })\r\n}\r\n\r\nconst _savePublications = async (year = null) => {\r\n  const articles = await _getPublications(year).catch(err =>\r\n    logger.log('error', err)\r\n  )\r\n  let array = []\r\n  let promises = []\r\n  articles.forEach(async article => {\r\n    const { PUB_IEEE: title, PUB_CODE: code } = article\r\n    //promises.push(_getArticleWithAuthors(year, title, code))\r\n    promises.push({ year, title, code })\r\n  })\r\n  Promise.all(promises)\r\n    .then(tempArray => {\r\n      tempArray.forEach(art => array.push(art))\r\n      saveFiles(year, 'publications', JSON.stringify(array))\r\n    })\r\n    .catch(err => logger.log('error', err))\r\n}\r\n\r\nconst _getArticleWithAuthors = async (year, title, code) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    const others = await _getOtherAuthorsOfArticle(code).catch(err => {\r\n      logger.log('error', err)\r\n      reject('something went wrong ...')\r\n    })\r\n    const temp = {\r\n      title,\r\n      code,\r\n      year,\r\n      authors: []\r\n    }\r\n    if (others) {\r\n      others.forEach(author => {\r\n        temp.authors.push(author.get('AUT_NAME'))\r\n      })\r\n    }\r\n    resolve(temp)\r\n  })\r\n}\r\n"},"lineCount":null}},"hash":"854d494deb9f34f8a5e42bc623c5b11a","cacheData":{"env":{}}}