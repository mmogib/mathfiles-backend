{"id":"wox6","dependencies":[{"name":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\package.json","includedInParent":true,"mtime":1534490769265},{"name":"../models/Course","loc":{"line":1,"column":23},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\syllabi.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Course.js"},{"name":"../models/Syllabus","loc":{"line":2,"column":25},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\syllabi.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Syllabus.js"},{"name":"./general","loc":{"line":3,"column":30},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\syllabi.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\general.js"}],"generated":{"js":"const s=require(\"../models/Course\"),e=require(\"../models/Syllabus\"),{saveFiles:l}=require(\"./general\");module.exports={saveSyllabi(){e.findAll({include:[{model:s}]}).then(s=>{let e=[],r=[];s.forEach(s=>{const{SYL_COURSE:l,SYL_SEMES:i,Course:t}=s;if(t){const{ALC_TITLE:s}=t;!r.includes(i)&&r.push(i),e.push({term:i,course:l,title:s})}}),r.sort((s,e)=>parseInt(s)<=parseInt(e)?1:-1),l(\"syllabus_terms\",\"syllabi\",JSON.stringify(r)),l(\"syllabus_links\",\"syllabi\",JSON.stringify(e))})}};","map":{"mappings":[{"source":"app\\files\\syllabi.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"app\\files\\syllabi.js","name":"Course","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"app\\files\\syllabi.js","name":"require","original":{"line":1,"column":15},"generated":{"line":1,"column":8}},{"source":"app\\files\\syllabi.js","original":{"line":1,"column":23},"generated":{"line":1,"column":16}},{"source":"app\\files\\syllabi.js","name":"Syllabus","original":{"line":2,"column":6},"generated":{"line":1,"column":36}},{"source":"app\\files\\syllabi.js","name":"require","original":{"line":2,"column":17},"generated":{"line":1,"column":38}},{"source":"app\\files\\syllabi.js","original":{"line":2,"column":25},"generated":{"line":1,"column":46}},{"source":"app\\files\\syllabi.js","original":{"line":3,"column":6},"generated":{"line":1,"column":69}},{"source":"app\\files\\syllabi.js","name":"saveFiles","original":{"line":3,"column":8},"generated":{"line":1,"column":79}},{"source":"app\\files\\syllabi.js","name":"require","original":{"line":3,"column":22},"generated":{"line":1,"column":82}},{"source":"app\\files\\syllabi.js","original":{"line":3,"column":30},"generated":{"line":1,"column":90}},{"source":"app\\files\\syllabi.js","name":"module","original":{"line":4,"column":0},"generated":{"line":1,"column":103}},{"source":"app\\files\\syllabi.js","name":"exports","original":{"line":4,"column":7},"generated":{"line":1,"column":110}},{"source":"app\\files\\syllabi.js","original":{"line":4,"column":17},"generated":{"line":1,"column":118}},{"source":"app\\files\\syllabi.js","original":{"line":5,"column":16},"generated":{"line":1,"column":119}},{"source":"app\\files\\syllabi.js","name":"findAll","original":{"line":6,"column":13},"generated":{"line":1,"column":133}},{"source":"app\\files\\syllabi.js","name":"findAll","original":{"line":6,"column":13},"generated":{"line":1,"column":135}},{"source":"app\\files\\syllabi.js","original":{"line":6,"column":21},"generated":{"line":1,"column":143}},{"source":"app\\files\\syllabi.js","original":{"line":7,"column":15},"generated":{"line":1,"column":144}},{"source":"app\\files\\syllabi.js","original":{"line":7,"column":15},"generated":{"line":1,"column":152}},{"source":"app\\files\\syllabi.js","original":{"line":8,"column":8},"generated":{"line":1,"column":153}},{"source":"app\\files\\syllabi.js","name":"Course","original":{"line":9,"column":17},"generated":{"line":1,"column":154}},{"source":"app\\files\\syllabi.js","name":"Course","original":{"line":9,"column":17},"generated":{"line":1,"column":160}},{"source":"app\\files\\syllabi.js","name":"then","original":{"line":12,"column":7},"generated":{"line":1,"column":166}},{"source":"app\\files\\syllabi.js","name":"rows","original":{"line":12,"column":12},"generated":{"line":1,"column":171}},{"source":"app\\files\\syllabi.js","name":"list","original":{"line":13,"column":10},"generated":{"line":1,"column":175}},{"source":"app\\files\\syllabi.js","name":"list","original":{"line":13,"column":10},"generated":{"line":1,"column":179}},{"source":"app\\files\\syllabi.js","original":{"line":13,"column":17},"generated":{"line":1,"column":181}},{"source":"app\\files\\syllabi.js","name":"terms","original":{"line":14,"column":8},"generated":{"line":1,"column":184}},{"source":"app\\files\\syllabi.js","original":{"line":14,"column":16},"generated":{"line":1,"column":186}},{"source":"app\\files\\syllabi.js","name":"forEach","original":{"line":15,"column":11},"generated":{"line":1,"column":189}},{"source":"app\\files\\syllabi.js","name":"forEach","original":{"line":15,"column":11},"generated":{"line":1,"column":191}},{"source":"app\\files\\syllabi.js","name":"row","original":{"line":15,"column":19},"generated":{"line":1,"column":199}},{"source":"app\\files\\syllabi.js","original":{"line":16,"column":14},"generated":{"line":1,"column":203}},{"source":"app\\files\\syllabi.js","name":"SYL_COURSE","original":{"line":16,"column":16},"generated":{"line":1,"column":209}},{"source":"app\\files\\syllabi.js","name":"course","original":{"line":16,"column":28},"generated":{"line":1,"column":220}},{"source":"app\\files\\syllabi.js","name":"SYL_SEMES","original":{"line":16,"column":36},"generated":{"line":1,"column":222}},{"source":"app\\files\\syllabi.js","name":"term","original":{"line":16,"column":47},"generated":{"line":1,"column":232}},{"source":"app\\files\\syllabi.js","name":"Course","original":{"line":16,"column":53},"generated":{"line":1,"column":234}},{"source":"app\\files\\syllabi.js","name":"courseObj","original":{"line":16,"column":61},"generated":{"line":1,"column":241}},{"source":"app\\files\\syllabi.js","name":"row","original":{"line":16,"column":75},"generated":{"line":1,"column":244}},{"source":"app\\files\\syllabi.js","name":"courseObj","original":{"line":17,"column":12},"generated":{"line":1,"column":246}},{"source":"app\\files\\syllabi.js","name":"courseObj","original":{"line":17,"column":12},"generated":{"line":1,"column":249}},{"source":"app\\files\\syllabi.js","original":{"line":17,"column":23},"generated":{"line":1,"column":251}},{"source":"app\\files\\syllabi.js","original":{"line":18,"column":16},"generated":{"line":1,"column":252}},{"source":"app\\files\\syllabi.js","name":"ALC_TITLE","original":{"line":18,"column":18},"generated":{"line":1,"column":258}},{"source":"app\\files\\syllabi.js","name":"title","original":{"line":18,"column":29},"generated":{"line":1,"column":268}},{"source":"app\\files\\syllabi.js","name":"courseObj","original":{"line":18,"column":39},"generated":{"line":1,"column":271}},{"source":"app\\files\\syllabi.js","name":"terms","original":{"line":19,"column":11},"generated":{"line":1,"column":274}},{"source":"app\\files\\syllabi.js","name":"includes","original":{"line":19,"column":17},"generated":{"line":1,"column":276}},{"source":"app\\files\\syllabi.js","name":"term","original":{"line":19,"column":26},"generated":{"line":1,"column":285}},{"source":"app\\files\\syllabi.js","name":"terms","original":{"line":19,"column":35},"generated":{"line":1,"column":289}},{"source":"app\\files\\syllabi.js","name":"push","original":{"line":19,"column":41},"generated":{"line":1,"column":291}},{"source":"app\\files\\syllabi.js","name":"term","original":{"line":19,"column":46},"generated":{"line":1,"column":296}},{"source":"app\\files\\syllabi.js","name":"push","original":{"line":20,"column":15},"generated":{"line":1,"column":299}},{"source":"app\\files\\syllabi.js","name":"push","original":{"line":20,"column":15},"generated":{"line":1,"column":301}},{"source":"app\\files\\syllabi.js","original":{"line":20,"column":20},"generated":{"line":1,"column":306}},{"source":"app\\files\\syllabi.js","name":"term","original":{"line":20,"column":22},"generated":{"line":1,"column":307}},{"source":"app\\files\\syllabi.js","name":"term","original":{"line":20,"column":22},"generated":{"line":1,"column":312}},{"source":"app\\files\\syllabi.js","name":"course","original":{"line":20,"column":28},"generated":{"line":1,"column":314}},{"source":"app\\files\\syllabi.js","name":"course","original":{"line":20,"column":28},"generated":{"line":1,"column":321}},{"source":"app\\files\\syllabi.js","name":"title","original":{"line":20,"column":36},"generated":{"line":1,"column":323}},{"source":"app\\files\\syllabi.js","name":"title","original":{"line":20,"column":36},"generated":{"line":1,"column":329}},{"source":"app\\files\\syllabi.js","name":"sort","original":{"line":23,"column":12},"generated":{"line":1,"column":336}},{"source":"app\\files\\syllabi.js","name":"sort","original":{"line":23,"column":12},"generated":{"line":1,"column":338}},{"source":"app\\files\\syllabi.js","original":{"line":23,"column":17},"generated":{"line":1,"column":343}},{"source":"app\\files\\syllabi.js","name":"a","original":{"line":23,"column":18},"generated":{"line":1,"column":344}},{"source":"app\\files\\syllabi.js","name":"b","original":{"line":23,"column":21},"generated":{"line":1,"column":346}},{"source":"app\\files\\syllabi.js","name":"parseInt","original":{"line":24,"column":15},"generated":{"line":1,"column":350}},{"source":"app\\files\\syllabi.js","name":"a","original":{"line":24,"column":24},"generated":{"line":1,"column":359}},{"source":"app\\files\\syllabi.js","name":"parseInt","original":{"line":24,"column":30},"generated":{"line":1,"column":363}},{"source":"app\\files\\syllabi.js","name":"b","original":{"line":24,"column":39},"generated":{"line":1,"column":372}},{"source":"app\\files\\syllabi.js","original":{"line":24,"column":44},"generated":{"line":1,"column":375}},{"source":"app\\files\\syllabi.js","original":{"line":24,"column":49},"generated":{"line":1,"column":378}},{"source":"app\\files\\syllabi.js","original":{"line":26,"column":16},"generated":{"line":1,"column":381}},{"source":"app\\files\\syllabi.js","original":{"line":26,"column":16},"generated":{"line":1,"column":383}},{"source":"app\\files\\syllabi.js","original":{"line":26,"column":34},"generated":{"line":1,"column":400}},{"source":"app\\files\\syllabi.js","name":"JSON","original":{"line":26,"column":45},"generated":{"line":1,"column":410}},{"source":"app\\files\\syllabi.js","name":"stringify","original":{"line":26,"column":50},"generated":{"line":1,"column":415}},{"source":"app\\files\\syllabi.js","name":"terms","original":{"line":26,"column":60},"generated":{"line":1,"column":425}},{"source":"app\\files\\syllabi.js","original":{"line":27,"column":16},"generated":{"line":1,"column":429}},{"source":"app\\files\\syllabi.js","original":{"line":27,"column":16},"generated":{"line":1,"column":431}},{"source":"app\\files\\syllabi.js","original":{"line":27,"column":34},"generated":{"line":1,"column":448}},{"source":"app\\files\\syllabi.js","name":"JSON","original":{"line":27,"column":45},"generated":{"line":1,"column":458}},{"source":"app\\files\\syllabi.js","name":"stringify","original":{"line":27,"column":50},"generated":{"line":1,"column":463}},{"source":"app\\files\\syllabi.js","name":"list","original":{"line":27,"column":60},"generated":{"line":1,"column":473}}],"sources":{"app\\files\\syllabi.js":"const Course = require('../models/Course')\r\nconst Syllabus = require('../models/Syllabus')\r\nconst { saveFiles } = require('./general')\r\nmodule.exports = {\r\n  saveSyllabi() {\r\n    Syllabus.findAll({\r\n      include: [\r\n        {\r\n          model: Course\r\n        }\r\n      ]\r\n    }).then(rows => {\r\n      let list = [],\r\n        terms = []\r\n      rows.forEach(row => {\r\n        const { SYL_COURSE: course, SYL_SEMES: term, Course: courseObj } = row\r\n        if (courseObj) {\r\n          const { ALC_TITLE: title } = courseObj\r\n          !terms.includes(term) && terms.push(term)\r\n          list.push({ term, course, title })\r\n        }\r\n      })\r\n      terms.sort((a, b) => {\r\n        return parseInt(a) <= parseInt(b) ? 1 : -1\r\n      })\r\n      saveFiles('syllabus_terms', 'syllabi', JSON.stringify(terms))\r\n      saveFiles('syllabus_links', 'syllabi', JSON.stringify(list))\r\n    })\r\n  }\r\n}\r\n"},"lineCount":null}},"hash":"cb88f1bdf20a37dc0151cec4be54b4f0","cacheData":{"env":{}}}