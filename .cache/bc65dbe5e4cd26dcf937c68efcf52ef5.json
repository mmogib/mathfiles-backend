{"id":"8b7T","dependencies":[{"name":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\package.json","includedInParent":true,"mtime":1534490769265},{"name":"../models/Personal","loc":{"line":2,"column":25},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\ranks.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Personal.js"},{"name":"../models/Rank","loc":{"line":3,"column":21},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\ranks.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\models\\Rank.js"},{"name":"./general","loc":{"line":4,"column":30},"parent":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\ranks.js","resolved":"E:\\dev\\projects\\department\\mathfiles\\mathfiles-backend\\app\\files\\general.js"}],"generated":{"js":"const e=require(\"fs\"),t=require(\"../models/Personal\"),r=require(\"../models/Rank\"),{saveFiles:s}=require(\"./general\");module.exports={saveAllRanks:()=>new Promise((e,a)=>{r.findAll({distinct:!0,attributes:[\"RAN_RANK\",\"RAN_FULL\"],include:[{model:t,attributes:[],where:{Per_Status:\"Active\",Per_Dgroup:\"Faculty\"}}]}).then(t=>{const r={};t.forEach(e=>{const{RAN_RANK:t,RAN_FULL:s}=e;r[t]=s});let a=[];Object.values(r).forEach(e=>a.push(e));const l=JSON.stringify(a);s(\"ranks\",\"faculty\",l),e(!0)}).catch(e=>a(!1))})};","map":{"mappings":[{"source":"app\\files\\ranks.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"app\\files\\ranks.js","name":"fs","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"app\\files\\ranks.js","name":"require","original":{"line":1,"column":11},"generated":{"line":1,"column":8}},{"source":"app\\files\\ranks.js","original":{"line":1,"column":19},"generated":{"line":1,"column":16}},{"source":"app\\files\\ranks.js","name":"Personal","original":{"line":2,"column":6},"generated":{"line":1,"column":22}},{"source":"app\\files\\ranks.js","name":"require","original":{"line":2,"column":17},"generated":{"line":1,"column":24}},{"source":"app\\files\\ranks.js","original":{"line":2,"column":25},"generated":{"line":1,"column":32}},{"source":"app\\files\\ranks.js","name":"Rank","original":{"line":3,"column":6},"generated":{"line":1,"column":54}},{"source":"app\\files\\ranks.js","name":"require","original":{"line":3,"column":13},"generated":{"line":1,"column":56}},{"source":"app\\files\\ranks.js","original":{"line":3,"column":21},"generated":{"line":1,"column":64}},{"source":"app\\files\\ranks.js","original":{"line":4,"column":6},"generated":{"line":1,"column":83}},{"source":"app\\files\\ranks.js","name":"saveFiles","original":{"line":4,"column":8},"generated":{"line":1,"column":93}},{"source":"app\\files\\ranks.js","name":"require","original":{"line":4,"column":22},"generated":{"line":1,"column":96}},{"source":"app\\files\\ranks.js","original":{"line":4,"column":30},"generated":{"line":1,"column":104}},{"source":"app\\files\\ranks.js","name":"module","original":{"line":6,"column":0},"generated":{"line":1,"column":117}},{"source":"app\\files\\ranks.js","name":"exports","original":{"line":6,"column":7},"generated":{"line":1,"column":124}},{"source":"app\\files\\ranks.js","original":{"line":6,"column":17},"generated":{"line":1,"column":132}},{"source":"app\\files\\ranks.js","original":{"line":7,"column":17},"generated":{"line":1,"column":133}},{"source":"app\\files\\ranks.js","original":{"line":7,"column":17},"generated":{"line":1,"column":146}},{"source":"app\\files\\ranks.js","original":{"line":8,"column":11},"generated":{"line":1,"column":150}},{"source":"app\\files\\ranks.js","name":"Promise","original":{"line":8,"column":15},"generated":{"line":1,"column":154}},{"source":"app\\files\\ranks.js","original":{"line":8,"column":23},"generated":{"line":1,"column":162}},{"source":"app\\files\\ranks.js","name":"resolve","original":{"line":8,"column":24},"generated":{"line":1,"column":163}},{"source":"app\\files\\ranks.js","name":"reject","original":{"line":8,"column":33},"generated":{"line":1,"column":165}},{"source":"app\\files\\ranks.js","name":"findAll","original":{"line":9,"column":11},"generated":{"line":1,"column":170}},{"source":"app\\files\\ranks.js","name":"findAll","original":{"line":9,"column":11},"generated":{"line":1,"column":172}},{"source":"app\\files\\ranks.js","original":{"line":9,"column":19},"generated":{"line":1,"column":180}},{"source":"app\\files\\ranks.js","original":{"line":10,"column":18},"generated":{"line":1,"column":181}},{"source":"app\\files\\ranks.js","original":{"line":10,"column":18},"generated":{"line":1,"column":191}},{"source":"app\\files\\ranks.js","original":{"line":11,"column":20},"generated":{"line":1,"column":193}},{"source":"app\\files\\ranks.js","original":{"line":11,"column":20},"generated":{"line":1,"column":204}},{"source":"app\\files\\ranks.js","original":{"line":11,"column":21},"generated":{"line":1,"column":205}},{"source":"app\\files\\ranks.js","original":{"line":11,"column":33},"generated":{"line":1,"column":216}},{"source":"app\\files\\ranks.js","original":{"line":12,"column":17},"generated":{"line":1,"column":228}},{"source":"app\\files\\ranks.js","original":{"line":12,"column":17},"generated":{"line":1,"column":236}},{"source":"app\\files\\ranks.js","original":{"line":13,"column":10},"generated":{"line":1,"column":237}},{"source":"app\\files\\ranks.js","name":"Personal","original":{"line":14,"column":19},"generated":{"line":1,"column":238}},{"source":"app\\files\\ranks.js","name":"Personal","original":{"line":14,"column":19},"generated":{"line":1,"column":244}},{"source":"app\\files\\ranks.js","original":{"line":16,"column":24},"generated":{"line":1,"column":246}},{"source":"app\\files\\ranks.js","original":{"line":16,"column":24},"generated":{"line":1,"column":257}},{"source":"app\\files\\ranks.js","original":{"line":17,"column":19},"generated":{"line":1,"column":260}},{"source":"app\\files\\ranks.js","original":{"line":17,"column":19},"generated":{"line":1,"column":266}},{"source":"app\\files\\ranks.js","original":{"line":18,"column":26},"generated":{"line":1,"column":267}},{"source":"app\\files\\ranks.js","original":{"line":18,"column":26},"generated":{"line":1,"column":278}},{"source":"app\\files\\ranks.js","original":{"line":19,"column":26},"generated":{"line":1,"column":287}},{"source":"app\\files\\ranks.js","original":{"line":19,"column":26},"generated":{"line":1,"column":298}},{"source":"app\\files\\ranks.js","name":"then","original":{"line":24,"column":9},"generated":{"line":1,"column":313}},{"source":"app\\files\\ranks.js","name":"ranksArr","original":{"line":24,"column":14},"generated":{"line":1,"column":318}},{"source":"app\\files\\ranks.js","name":"ranks","original":{"line":25,"column":16},"generated":{"line":1,"column":322}},{"source":"app\\files\\ranks.js","name":"ranks","original":{"line":25,"column":16},"generated":{"line":1,"column":328}},{"source":"app\\files\\ranks.js","original":{"line":25,"column":24},"generated":{"line":1,"column":330}},{"source":"app\\files\\ranks.js","name":"forEach","original":{"line":26,"column":19},"generated":{"line":1,"column":333}},{"source":"app\\files\\ranks.js","name":"forEach","original":{"line":26,"column":19},"generated":{"line":1,"column":335}},{"source":"app\\files\\ranks.js","name":"rank","original":{"line":26,"column":27},"generated":{"line":1,"column":343}},{"source":"app\\files\\ranks.js","original":{"line":27,"column":18},"generated":{"line":1,"column":347}},{"source":"app\\files\\ranks.js","original":{"line":27,"column":18},"generated":{"line":1,"column":353}},{"source":"app\\files\\ranks.js","name":"RAN_RANK","original":{"line":27,"column":20},"generated":{"line":1,"column":362}},{"source":"app\\files\\ranks.js","original":{"line":27,"column":18},"generated":{"line":1,"column":364}},{"source":"app\\files\\ranks.js","name":"RAN_FULL","original":{"line":27,"column":30},"generated":{"line":1,"column":373}},{"source":"app\\files\\ranks.js","name":"rank","original":{"line":27,"column":43},"generated":{"line":1,"column":376}},{"source":"app\\files\\ranks.js","name":"RAN_RANK","original":{"line":28,"column":18},"generated":{"line":1,"column":378}},{"source":"app\\files\\ranks.js","name":"RAN_RANK","original":{"line":28,"column":18},"generated":{"line":1,"column":380}},{"source":"app\\files\\ranks.js","name":"RAN_FULL","original":{"line":28,"column":30},"generated":{"line":1,"column":383}},{"source":"app\\files\\ranks.js","name":"ranksArray","original":{"line":30,"column":14},"generated":{"line":1,"column":387}},{"source":"app\\files\\ranks.js","name":"ranksArray","original":{"line":30,"column":14},"generated":{"line":1,"column":391}},{"source":"app\\files\\ranks.js","original":{"line":30,"column":27},"generated":{"line":1,"column":393}},{"source":"app\\files\\ranks.js","name":"values","original":{"line":31,"column":17},"generated":{"line":1,"column":396}},{"source":"app\\files\\ranks.js","name":"values","original":{"line":31,"column":17},"generated":{"line":1,"column":403}},{"source":"app\\files\\ranks.js","name":"ranks","original":{"line":31,"column":24},"generated":{"line":1,"column":410}},{"source":"app\\files\\ranks.js","name":"forEach","original":{"line":31,"column":31},"generated":{"line":1,"column":413}},{"source":"app\\files\\ranks.js","name":"value","original":{"line":31,"column":39},"generated":{"line":1,"column":421}},{"source":"app\\files\\ranks.js","name":"ranksArray","original":{"line":31,"column":48},"generated":{"line":1,"column":424}},{"source":"app\\files\\ranks.js","name":"push","original":{"line":31,"column":59},"generated":{"line":1,"column":426}},{"source":"app\\files\\ranks.js","name":"value","original":{"line":31,"column":64},"generated":{"line":1,"column":431}},{"source":"app\\files\\ranks.js","name":"data","original":{"line":32,"column":16},"generated":{"line":1,"column":435}},{"source":"app\\files\\ranks.js","name":"data","original":{"line":32,"column":16},"generated":{"line":1,"column":441}},{"source":"app\\files\\ranks.js","name":"JSON","original":{"line":32,"column":23},"generated":{"line":1,"column":443}},{"source":"app\\files\\ranks.js","name":"stringify","original":{"line":32,"column":28},"generated":{"line":1,"column":448}},{"source":"app\\files\\ranks.js","name":"ranksArray","original":{"line":32,"column":38},"generated":{"line":1,"column":458}},{"source":"app\\files\\ranks.js","original":{"line":33,"column":20},"generated":{"line":1,"column":461}},{"source":"app\\files\\ranks.js","original":{"line":33,"column":20},"generated":{"line":1,"column":463}},{"source":"app\\files\\ranks.js","original":{"line":33,"column":29},"generated":{"line":1,"column":471}},{"source":"app\\files\\ranks.js","name":"data","original":{"line":33,"column":40},"generated":{"line":1,"column":481}},{"source":"app\\files\\ranks.js","original":{"line":34,"column":18},"generated":{"line":1,"column":484}},{"source":"app\\files\\ranks.js","original":{"line":34,"column":18},"generated":{"line":1,"column":487}},{"source":"app\\files\\ranks.js","name":"catch","original":{"line":36,"column":9},"generated":{"line":1,"column":492}},{"source":"app\\files\\ranks.js","name":"err","original":{"line":36,"column":15},"generated":{"line":1,"column":498}},{"source":"app\\files\\ranks.js","name":"reject","original":{"line":36,"column":22},"generated":{"line":1,"column":501}},{"source":"app\\files\\ranks.js","original":{"line":36,"column":29},"generated":{"line":1,"column":504}}],"sources":{"app\\files\\ranks.js":"const fs = require('fs')\r\nconst Personal = require('../models/Personal')\r\nconst Rank = require('../models/Rank')\r\nconst { saveFiles } = require('./general')\r\n\r\nmodule.exports = {\r\n  saveAllRanks() {\r\n    return new Promise((resolve, reject) => {\r\n      Rank.findAll({\r\n        distinct: true,\r\n        attributes: ['RAN_RANK', 'RAN_FULL'],\r\n        include: [\r\n          {\r\n            model: Personal,\r\n\r\n            attributes: [],\r\n            where: {\r\n              Per_Status: 'Active',\r\n              Per_Dgroup: 'Faculty'\r\n            }\r\n          }\r\n        ]\r\n      })\r\n        .then(ranksArr => {\r\n          const ranks = {}\r\n          ranksArr.forEach(rank => {\r\n            const { RAN_RANK, RAN_FULL } = rank\r\n            ranks[RAN_RANK] = RAN_FULL\r\n          })\r\n          let ranksArray = []\r\n          Object.values(ranks).forEach(value => ranksArray.push(value))\r\n          const data = JSON.stringify(ranksArray)\r\n          saveFiles('ranks', 'faculty', data)\r\n          resolve(true)\r\n        })\r\n        .catch(err => reject(false))\r\n    })\r\n  }\r\n}\r\n"},"lineCount":null}},"hash":"50d3456c31fefc3e082de89558eb92d2","cacheData":{"env":{}}}