{"version":3,"sources":["app\\files\\logger.js","app\\models\\Base.js","app\\models\\Rank.js","app\\models\\FacultyCourseFile.js","app\\models\\Personal.js","app\\files\\general.js","app\\files\\ranks.js","app\\models\\Schedule.js","app\\models\\OfficeHour.js","app\\models\\Ressami.js","app\\files\\faculty.js","app\\models\\Author.js","app\\models\\Publication.js","app\\files\\publications.js","app\\models\\CourseFile.js","app\\files\\course_files.js","app\\models\\Course.js","app\\models\\Syllabus.js","app\\files\\syllabi.js","app\\models\\TechnicalReport.js","app\\files\\technical_reports.js","index.js"],"names":["winston","require","loggingFile","process","env","JSON_FILES_PRODUCTION","logger","createLogger","level","format","json","transports","File","filename","Console","simple","module","exports","Sequelize","Op","sequelize","MATHFILES_DB","MATHFILES_USER","MATHFILES_PW","host","MATHFILES_HOST","dialect","operatorsAliases","logging","Rank","define","RAN_SNO","type","INTEGER","primaryKey","RAN_CODE","STRING","RAN_FULL","RAN_RANK","tableName","updatedAt","createdAt","FacultyCourseFile","CFF_SNO","CFF_Atid","CFF_Course","CFF_Semes","CFF_Section","CFF_Linksec","CFF_Notes","CFF_Files","Personal","Per_SNO","Per_DCODE","Per_ATID","Per_Status","Per_Rank","Per_Dgroup","Per_EMAIL","Per_FullNameX","Per_Title","Per_OTEL","Per_OffBldg","Per_OffRoom","Per_Box","Per_WebLoc","Per_RankCode","belongsTo","foreignKey","targetKey","fs","getCourseLinks","term","course","section","docsString","temp1","pdfs","msdocs","split","length","forEach","temp","dcs","slice","push","docs","map","value","name","link","sort","a","b","getCurrentSemester","now","Date","timeNow","getTime","year","parseInt","getFullYear","toString","substr","nextFallStart","prevSummerStart","prevSpringStart","prevFallStart","saveFiles","base","folder","data","file","productionFolder","devFolder","JSON_FILES_DEV","NODE_ENV","devExist","_createFolder","writeFile","err","log","productionExist","createFolder","path","Promise","resolve","exists","mkdir","saveAllRanks","reject","findAll","distinct","attributes","include","model","where","then","ranksArr","ranks","rank","ranksArray","Object","values","JSON","stringify","catch","Schedule","SCH_SNO","SCH_ATID","SCH_COURSE","SCH_SEMES","SCH_SECTION","SCH_SHOUR","SCH_SMIN","SCH_EHOUR","SCH_EMIN","SCH_PLACE","SCH_DAYS","SCH_TYPE","SCH_NOTES","hasMany","sourceKey","OfficeHour","OFF_SNO","OFF_ATID","OFF_SEMES","OFF_LOC","OFF_TEL","OFF_S1","OFF_S2","OFF_S3","OFF_S4","OFF_S5","OFF_S6","OFF_S7","OFF_S8","OFF_U1","OFF_U2","OFF_U3","OFF_U4","OFF_U5","OFF_U6","OFF_U7","OFF_U8","OFF_M1","OFF_M2","OFF_M3","OFF_M4","OFF_M5","OFF_M6","OFF_M7","OFF_M8","OFF_T1","OFF_T2","OFF_T3","OFF_T4","OFF_T5","OFF_T6","OFF_T7","OFF_T8","OFF_W1","OFF_W2","OFF_W3","OFF_W4","OFF_W5","OFF_W6","OFF_W7","OFF_W8","OFF_R1","OFF_R2","OFF_R3","OFF_R4","OFF_R5","OFF_R6","OFF_R7","OFF_R8","OFF_Notes","OFF_FLAG","Ressami","SAMI_SNO","SAMI_ATID","SAMI_TITLE","axios","getActiveFaculty","limit","_getActiveFaculty","saveFacultyCourseFiles","courseFileList","order","ne","cf","cfiles","username","courseFiles","docString","notes","error","saveFacultyPics","cnt","all","faculty","url","FACULTY_IMAGES_DOWNLOAD_URL","image_production","FACULTY_IMAGES_UPLOAD_URL_PRODUCTION","image_dev","FACULTY_IMAGES_UPLOAD_URL_DEV","method","responseType","response","pipe","createWriteStream","on","saveFaculty","facultyList","shortRank","fullname","email","title","officetel","officebldg","officeroom","postbox","website","Schedules","tempSchedule","OfficeHours","tempOh","schedule","_formatSchedule","officehours","_formatOfficeHour","tempObj","researchinterests","publications","proms","riArr","ri","tempRIARR","filter","index","self","indexOf","array","list","required","am","RegExp","pm","row","start_hour","match","replace","trim","start_ampm","end_hour","end_ampm","start_minutes","end_minutes","place","days","note","sun","mon","tue","wed","thu","office_location","phone","Author","AUT_SNO","AUT_PubCode","AUT_ATID","allowNull","AUT_NAME","Publication","Pub_SNO","PUB_CODE","PUB_Year","PUB_IEEE","as","saveAllOtherAuthors","others","_getAllOtherAuthors","authors","author","savePublications","years","_getPublicationsArray","_savePublications","savePublicationsYears","_getPublicationsYears","yearsArr","yearObj","getFacultyPublications","_getFacultyPublications","saveFacultyPublications","facultyArr","pubs","_saveFacultyPublications","_getFacultyArticles","listOFCodes","one","code","query","_getOtherAuthorsOfArticle","_updateArticleWithOtherAuthors","articles","res","rej","article","item","get","_getPublications","promises","tempArray","art","_getArticleWithAuthors","CourseFile","OFF_SEMESTER","OFF_COURSE","OFF_EXAM","OFF_TYPE","OFF_SECTION","getAllCourseFiles","_getAllCourseFiles","saveAllCourseFiles","_CoursesIncludeCourse","courses","findIndex","rows","exam","foundTermIndex","exams","courseIndex","Course","ALC_SNO","ALC_COURSE","ALC_TITLE","Syllabus","SYL_SNO","SYL_COURSE","SYL_SEMES","saveSyllabi","terms","courseObj","includes","TechnicalReport","Tech_SNO","Tech_CODE","Tech_DCODE","Tech_Title","Tech_Authors","Tech_Year","saveTechnicalReports","config","cron","toLocaleString","h","m","s","increment_minutes","minutes","date"],"mappings":"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,MAGEC,MAAM,EAHR;AAAA,MAIEC,MAAM,EAJR;AAKA,QAAM;AACJ9I,cAAUoE,QADN;AAEJnE,AWpRJrK,QAAQ,OXoROuE,CWpRf,EAAkBoU,CXkRV,KWlRR;AXqRIrO,AWpRJ,MAAMsO,OXoROzF,AWpRAnT,QAAQ,OXiRb,IWjRK,CAAb;AXqRIuK,AWpRJ,MAAMlK,OXoRO+S,EWpREpT,GXgRP,KWhRe,oBAAR,CAAf;AXqRIwN,AWpRJ,MAAM,EAAExF,OXoRO6K,IALP,CW/QF,KAAmB7S,QAAQ,mBAAR,CAAzB;AXqRIwK,AWpRJ,MAAM,IX8QE;AAOJC,AWpRFoF,UX6QM,GW9QF;AXsRFnF,AWpRFmE,UX4QM,OW9QF;AXuRFlE,AWpRFuD,UX2QM;AAUJtD,AWxRE,IAIF5K,MX0QI,EW1QI,qBAAR,CAJJ;AXyRI6K,AWpRJ,MAAM,IXyQE;AAYJC,AWpRFkK,UXwQM,eWzQF;AXsRFjK,AWpRF2J,UXuQM,aWzQF;AXuRF1J,AWpRFsJ,UXsQM,QWzQF;AXwRFrJ,AWpRFgJ,UXqQM;AAgBJ/I,AWzRE,IAKFlL,MXoQI,EWpQI,0BAAR,CALJ;AX0RImL,AWpRJ,MAAM,EAAE2L,EXmQA,gBWnQF,KAAyB9W,QAAQ,0BAAR,CAA/B;AXqRIoL,AWpRJ,MAAM,EAAE2M,EXkQA,SWlQF,KAAkB/X,QAAQ,qBAAR,CAAxB;AXqRIqL,AWpRJ,MAAM,EAAEqN,EXiQA,kBWjQF,KAA2B1Y,QAAQ,+BAAR,CAAjC;AXqRIsL,AWpRJ,UXgQQ;AAqBJC,UArBI;AAsBJC,AWpRJnL,OAAOmH,GX8PC,AW9PR,CAAW,MAAX,EAAmB,yBAAyB,IAAIzB,IAAJ,GAAW8S,cAAX,EAA5C;AXqRIpN,AWpRJ,UX6PQ;AAwBJC,UAxBI;AAyBJC,UAzBI;AA0BJC,UA1BI;AA2BJC,AWpRJ,MAAMiN,IXyPE,AWzPE,CAAV;AXqRIhN,AWrRJ,MACEiN,IXwPM,AWxPF,CADN;AXsRIhN,AWtRJ,MAEEiN,IXuPM,AWvPF,CAFN;AXuRIhN,AWvRJ,MAGEiN,IXsPM,gBWtPc,CAHtB;AXwRIhN,UA/BI;AAgCJC,AWpRJ,UXoPQ;AAiCJC,AWpRJ,UXmP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","file":"index.map","sourceRoot":"..","sourcesContent":["const winston = require('winston')\r\nconst loggingFile = `${process.env.JSON_FILES_PRODUCTION}/logs`\r\n\r\nconst logger = winston.createLogger({\r\n  level: 'info',\r\n  format: winston.format.json(),\r\n  transports: [\r\n    //\r\n    // - Write to all logs with level `info` and below to `combined.log`\r\n    // - Write all logs error (and below) to `error.log`.\r\n    //\r\n    new winston.transports.File({\r\n      filename: `${loggingFile}/error.log`,\r\n      level: 'error'\r\n    }),\r\n\r\n    new winston.transports.File({\r\n      filename: `${loggingFile}/combined.log`\r\n    }),\r\n    new winston.transports.Console({\r\n      format: winston.format.simple(),\r\n      level: 'info'\r\n    })\r\n  ]\r\n})\r\n\r\nmodule.exports = logger\r\n","const Sequelize = require('sequelize')\r\nconst Op = Sequelize.Op\r\nconst sequelize = new Sequelize(\r\n  process.env.MATHFILES_DB,\r\n  process.env.MATHFILES_USER,\r\n  process.env.MATHFILES_PW,\r\n  {\r\n    host: process.env.MATHFILES_HOST,\r\n    dialect: 'mssql',\r\n    operatorsAliases: Op,\r\n    logging: false\r\n    /*\r\n  pool: {\r\n    max: 5,\r\n    min: 0,\r\n    acquire: 30000,\r\n    idle: 10000\r\n  },\r\n*/\r\n  }\r\n)\r\n\r\nmodule.exports = sequelize\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\n\r\nconst Rank = sequelize.define(\r\n  'Rank',\r\n  {\r\n    RAN_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    RAN_CODE: Sequelize.STRING,\r\n    RAN_FULL: Sequelize.STRING,\r\n    RAN_RANK: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'Ranks',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = Rank\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst FacultyCourseFile = sequelize.define(\r\n  'FacultyCourseFile',\r\n  {\r\n    CFF_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    CFF_Atid: Sequelize.STRING,\r\n    CFF_Course: Sequelize.STRING,\r\n    CFF_Semes: Sequelize.STRING,\r\n    CFF_Section: Sequelize.STRING,\r\n    CFF_Linksec: Sequelize.STRING,\r\n    CFF_Notes: Sequelize.STRING,\r\n    CFF_Files: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'CFFiles',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = FacultyCourseFile\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Rank = require('./Rank')\r\nconst FacultyCourseFile = require('./FacultyCourseFile')\r\nconst Personal = sequelize.define(\r\n  'Personal',\r\n  {\r\n    Per_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    Per_DCODE: Sequelize.STRING,\r\n    Per_ATID: Sequelize.STRING,\r\n    Per_Status: Sequelize.STRING,\r\n    Per_Rank: Sequelize.STRING,\r\n    Per_Dgroup: Sequelize.STRING,\r\n    Per_EMAIL: Sequelize.STRING,\r\n    Per_FullNameX: Sequelize.STRING,\r\n    Per_Title: Sequelize.STRING,\r\n    Per_OTEL: Sequelize.STRING,\r\n    Per_OffBldg: Sequelize.STRING,\r\n    Per_OffRoom: Sequelize.STRING,\r\n    Per_Box: Sequelize.STRING,\r\n    Per_WebLoc: Sequelize.STRING,\r\n    Per_RankCode: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'Personal',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nPersonal.belongsTo(Rank, {\r\n  foreignKey: 'Per_Rank',\r\n  targetKey: 'RAN_RANK'\r\n})\r\n\r\nRank.belongsTo(Personal, {\r\n  foreignKey: 'RAN_RANK',\r\n  targetKey: 'Per_Rank'\r\n})\r\n\r\nPersonal.belongsTo(FacultyCourseFile, {\r\n  foreignKey: 'Per_ATID',\r\n  targetKey: 'CFF_Atid'\r\n})\r\n\r\nmodule.exports = Personal\r\n","const fs = require('fs')\r\nconst logger = require('./logger')\r\n\r\nmodule.exports = {\r\n  getCourseLinks(term, course, section, docsString) {\r\n    ////172/coursefile_data/MATH102_172_41_Q1.pdf\r\n    let temp1 = [],\r\n      pdfs = [],\r\n      msdocs = []\r\n    temp1 = docsString.split('p')\r\n    if (temp1.length == 0) {\r\n      temp1 = [docsString]\r\n    }\r\n    temp1.forEach(temp => {\r\n      const dcs = temp.split('d')\r\n      if (dcs.length > 1) {\r\n        msdocs = [...msdocs, ...dcs.slice(0, dcs.length - 1)]\r\n      } else {\r\n        pdfs.push(temp)\r\n      }\r\n    })\r\n    pdfs = pdfs.slice(0, pdfs.length - 1)\r\n    let docs = []\r\n    if (pdfs.length > 0) {\r\n      pdfs.map(value => {\r\n        docs.push({\r\n          name: value,\r\n          link: `${course}_${term}_${section}_${value}.pdf`\r\n        })\r\n      })\r\n    }\r\n    if (msdocs.length > 0) {\r\n      msdocs.map(value => {\r\n        docs.push({\r\n          name: value,\r\n          link: `${course}_${term}_${section}_${value}.doc`\r\n        })\r\n      })\r\n    }\r\n    docs = docs.sort((a, b) => a.name >= b.name)\r\n    return docs\r\n  },\r\n  getCurrentSemester() {\r\n    const now = new Date()\r\n    const timeNow = now.getTime()\r\n    let year = parseInt(\r\n      now\r\n        .getFullYear()\r\n        .toString()\r\n        .substr(-2)\r\n    )\r\n    const nextFallStart = new Date(`9/1/${year}`).getTime()\r\n    const prevSummerStart = new Date(`6/1/${year}`).getTime()\r\n    const prevSpringStart = new Date(`2/1/${year}`).getTime()\r\n    const prevFallStart = new Date(`9/1/${year - 1}`).getTime()\r\n    let term = ''\r\n    if (timeNow >= prevFallStart && timeNow < prevSpringStart) {\r\n      term = `${year - 1}1`\r\n    } else if (timeNow >= prevSpringStart && timeNow < prevSummerStart) {\r\n      term = `${year - 1}2`\r\n    } else if (timeNow >= prevSummerStart && timeNow < nextFallStart) {\r\n      term = `${year - 1}3`\r\n    } else {\r\n      term = `${year}1`\r\n    }\r\n\r\n    return term\r\n  },\r\n\r\n  async saveFiles(base, folder, data) {\r\n    const file = `${base}.json`\r\n    const productionFolder = `${process.env.JSON_FILES_PRODUCTION}/${folder}`\r\n    const devFolder = `${process.env.JSON_FILES_DEV}/${folder}`\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      const devExist = await _createFolder(devFolder)\r\n      if (devExist) {\r\n        fs.writeFile(`${devFolder}/${file}`, data, err => {\r\n          if (err) logger.log('error', err)\r\n          logger.log('info', `${devFolder}/${file} saved...`)\r\n        })\r\n      } else {\r\n        logger.log('error', `${devFolder} was not created ..`)\r\n      }\r\n    }\r\n    const productionExist = await _createFolder(productionFolder)\r\n    if (productionExist) {\r\n      fs.writeFile(`${productionFolder}/${file}`, data, err => {\r\n        if (err) logger.log('error', err)\r\n        logger.log('info', `${productionFolder}/${file} saved...`)\r\n      })\r\n    } else {\r\n      logger.log('error', `${productionFolder} was not created ..`)\r\n    }\r\n  },\r\n  createFolder(path) {\r\n    _createFolder(path)\r\n  }\r\n}\r\n\r\nconst _createFolder = path => {\r\n  return new Promise(resolve => {\r\n    fs.exists(path, exists => {\r\n      if (exists) {\r\n        resolve(true)\r\n      } else {\r\n        fs.mkdir(path, err => {\r\n          if (err) resolve(false)\r\n          resolve(true)\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n","const fs = require('fs')\r\nconst Personal = require('../models/Personal')\r\nconst Rank = require('../models/Rank')\r\nconst { saveFiles } = require('./general')\r\n\r\nmodule.exports = {\r\n  saveAllRanks() {\r\n    return new Promise((resolve, reject) => {\r\n      Rank.findAll({\r\n        distinct: true,\r\n        attributes: ['RAN_RANK', 'RAN_FULL'],\r\n        include: [\r\n          {\r\n            model: Personal,\r\n\r\n            attributes: [],\r\n            where: {\r\n              Per_Status: 'Active',\r\n              Per_Dgroup: 'Faculty'\r\n            }\r\n          }\r\n        ]\r\n      })\r\n        .then(ranksArr => {\r\n          const ranks = {}\r\n          ranksArr.forEach(rank => {\r\n            const { RAN_RANK, RAN_FULL } = rank\r\n            ranks[RAN_RANK] = RAN_FULL\r\n          })\r\n          let ranksArray = []\r\n          Object.values(ranks).forEach(value => ranksArray.push(value))\r\n          const data = JSON.stringify(ranksArray)\r\n          saveFiles('ranks', 'faculty', data)\r\n          resolve(true)\r\n        })\r\n        .catch(err => reject(false))\r\n    })\r\n  }\r\n}\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Personal = require('./Personal')\r\nconst Schedule = sequelize.define(\r\n  'Schedule',\r\n  {\r\n    SCH_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    SCH_ATID: Sequelize.STRING,\r\n    SCH_COURSE: Sequelize.STRING,\r\n    SCH_SEMES: Sequelize.STRING,\r\n    SCH_SECTION: Sequelize.INTEGER,\r\n    SCH_SHOUR: Sequelize.STRING,\r\n    SCH_SMIN: Sequelize.STRING,\r\n    SCH_EHOUR: Sequelize.STRING,\r\n    SCH_EMIN: Sequelize.STRING,\r\n    SCH_PLACE: Sequelize.STRING,\r\n    SCH_DAYS: Sequelize.STRING,\r\n    SCH_TYPE: Sequelize.STRING,\r\n    SCH_NOTES: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'Schedule',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nSchedule.belongsTo(Personal, {\r\n  foreignKey: 'SCH_ATID',\r\n  targetKey: 'Per_ATID'\r\n})\r\n\r\nPersonal.hasMany(Schedule, {\r\n  foreignKey: 'SCH_ATID',\r\n  sourceKey: 'Per_ATID'\r\n})\r\nmodule.exports = Schedule\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Personal = require('./Personal')\r\nconst OfficeHour = sequelize.define(\r\n  'OfficeHour',\r\n  {\r\n    OFF_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    OFF_ATID: Sequelize.STRING,\r\n    OFF_SEMES: Sequelize.STRING,\r\n    OFF_LOC: Sequelize.STRING,\r\n    OFF_TEL: Sequelize.STRING,\r\n    OFF_S1: Sequelize.STRING,\r\n    OFF_S2: Sequelize.STRING,\r\n    OFF_S3: Sequelize.STRING,\r\n    OFF_S4: Sequelize.STRING,\r\n    OFF_S5: Sequelize.STRING,\r\n    OFF_S6: Sequelize.STRING,\r\n    OFF_S7: Sequelize.STRING,\r\n    OFF_S8: Sequelize.STRING,\r\n    OFF_U1: Sequelize.STRING,\r\n    OFF_U2: Sequelize.STRING,\r\n    OFF_U3: Sequelize.STRING,\r\n    OFF_U4: Sequelize.STRING,\r\n    OFF_U5: Sequelize.STRING,\r\n    OFF_U6: Sequelize.STRING,\r\n    OFF_U7: Sequelize.STRING,\r\n    OFF_U8: Sequelize.STRING,\r\n    OFF_M1: Sequelize.STRING,\r\n    OFF_M2: Sequelize.STRING,\r\n    OFF_M3: Sequelize.STRING,\r\n    OFF_M4: Sequelize.STRING,\r\n    OFF_M5: Sequelize.STRING,\r\n    OFF_M6: Sequelize.STRING,\r\n    OFF_M7: Sequelize.STRING,\r\n    OFF_M8: Sequelize.STRING,\r\n    OFF_T1: Sequelize.STRING,\r\n    OFF_T2: Sequelize.STRING,\r\n    OFF_T3: Sequelize.STRING,\r\n    OFF_T4: Sequelize.STRING,\r\n    OFF_T5: Sequelize.STRING,\r\n    OFF_T6: Sequelize.STRING,\r\n    OFF_T7: Sequelize.STRING,\r\n    OFF_T8: Sequelize.STRING,\r\n    OFF_W1: Sequelize.STRING,\r\n    OFF_W2: Sequelize.STRING,\r\n    OFF_W3: Sequelize.STRING,\r\n    OFF_W4: Sequelize.STRING,\r\n    OFF_W5: Sequelize.STRING,\r\n    OFF_W6: Sequelize.STRING,\r\n    OFF_W7: Sequelize.STRING,\r\n    OFF_W8: Sequelize.STRING,\r\n    OFF_R1: Sequelize.STRING,\r\n    OFF_R2: Sequelize.STRING,\r\n    OFF_R3: Sequelize.STRING,\r\n    OFF_R4: Sequelize.STRING,\r\n    OFF_R5: Sequelize.STRING,\r\n    OFF_R6: Sequelize.STRING,\r\n    OFF_R7: Sequelize.STRING,\r\n    OFF_R8: Sequelize.STRING,\r\n    OFF_Notes: Sequelize.STRING,\r\n    OFF_FLAG: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'OfficeHours',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nOfficeHour.belongsTo(Personal, {\r\n  foreignKey: 'OFF_ATID',\r\n  targetKey: 'Per_ATID'\r\n})\r\n\r\nPersonal.hasMany(OfficeHour, {\r\n  foreignKey: 'OFF_ATID',\r\n  sourceKey: 'Per_ATID'\r\n})\r\nmodule.exports = OfficeHour\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Ressami = sequelize.define(\r\n  'Ressami',\r\n  {\r\n    SAMI_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    SAMI_ATID: Sequelize.STRING,\r\n    SAMI_TITLE: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'Ressami',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = Ressami\r\n","const { Op } = require('sequelize')\r\nconst fs = require('fs')\r\nconst axios = require('axios')\r\nconst Personal = require('../models/Personal')\r\nconst Schedule = require('../models/Schedule')\r\nconst OfficeHour = require('../models/OfficeHour')\r\nconst Rank = require('../models/Rank')\r\nconst FacultyCourseFile = require('../models/FacultyCourseFile')\r\nconst Ressami = require('../models/Ressami')\r\nconst {\r\n  getCurrentSemester,\r\n  saveFiles,\r\n  getCourseLinks\r\n} = require('./general.js')\r\nconst logger = require('./logger')\r\nconst term = getCurrentSemester()\r\nmodule.exports = {\r\n  getActiveFaculty(limit = null) {\r\n    return _getActiveFaculty(limit)\r\n  },\r\n  saveFacultyCourseFiles() {\r\n    let courseFileList = {}\r\n    Personal.findAll({\r\n      order: [\r\n        [FacultyCourseFile, 'CFF_Semes', 'DESC'],\r\n        [FacultyCourseFile, 'CFF_Course'],\r\n        [FacultyCourseFile, 'CFF_Section']\r\n      ],\r\n      include: [\r\n        {\r\n          model: FacultyCourseFile,\r\n          where: {\r\n            CFF_Files: { [Op.ne]: '' }\r\n          }\r\n        }\r\n      ],\r\n      where: {\r\n        Per_Status: 'Active',\r\n        Per_Dgroup: 'Faculty'\r\n      }\r\n    })\r\n      .then(cf => cf)\r\n      .then(cfiles => {\r\n        cfiles.forEach(cf => {\r\n          const { Per_ATID: username, FacultyCourseFile: courseFiles } = cf\r\n          const {\r\n            CFF_Course: course,\r\n            CFF_Semes: term,\r\n            CFF_Files: docString,\r\n            CFF_Section: section,\r\n            CFF_Linksec: link,\r\n            CFF_Notes: notes\r\n          } = courseFiles\r\n          if (courseFileList[username]) {\r\n            const docs = getCourseLinks(term, course, section, docString)\r\n            courseFileList[username].push({\r\n              username,\r\n              course,\r\n              term,\r\n              section,\r\n              link,\r\n              notes,\r\n              docs\r\n            })\r\n          } else {\r\n            courseFileList[username] = []\r\n          }\r\n        })\r\n        saveFiles(\r\n          'faculty_course_files',\r\n          'faculty',\r\n          JSON.stringify(courseFileList)\r\n        )\r\n      })\r\n      .catch(error => logger.log('error', error))\r\n  },\r\n  async saveFacultyPics() {\r\n    _getActiveFaculty()\r\n      .then(cnt => cnt)\r\n      .then(all => {\r\n        all.forEach(faculty => {\r\n          const { Per_ATID: username } = faculty\r\n          const url = `${\r\n            process.env.FACULTY_IMAGES_DOWNLOAD_URL\r\n          }/${username}.jpg`\r\n          const image_production = `${\r\n            process.env.FACULTY_IMAGES_UPLOAD_URL_PRODUCTION\r\n          }/${username}.jpg`\r\n          const image_dev = `${\r\n            process.env.FACULTY_IMAGES_UPLOAD_URL_DEV\r\n          }/${username}.jpg`\r\n          axios({\r\n            method: 'GET',\r\n            url: url,\r\n            responseType: 'stream'\r\n          }).then(response => {\r\n            response.data.pipe(fs.createWriteStream(image_production))\r\n            if (process.NODE_ENV !== 'production') {\r\n              response.data.pipe(fs.createWriteStream(image_dev))\r\n            }\r\n\r\n            // return a promise and resolve when download finishes\r\n            response.data.on('end', () =>\r\n              logger.log('info', `${username} saved`)\r\n            )\r\n            response.data.on('error', () =>\r\n              logger.log('error', `${username} not saved`)\r\n            )\r\n          })\r\n        })\r\n      })\r\n  },\r\n  saveFaculty() {\r\n    let facultyList = []\r\n    _getActiveFaculty()\r\n      .then(cnt => cnt)\r\n      .then(all => {\r\n        all.forEach(faculty => {\r\n          const {\r\n            Rank,\r\n            Per_Rank: shortRank,\r\n            Per_ATID: username,\r\n            Per_FullNameX: fullname,\r\n            Per_EMAIL: email,\r\n            Per_Title: title,\r\n            Per_OTEL: officetel,\r\n            Per_OffBldg: officebldg,\r\n            Per_OffRoom: officeroom,\r\n            Per_Box: postbox,\r\n            Per_WebLoc: website,\r\n            Schedules: tempSchedule,\r\n            OfficeHours: tempOh\r\n          } = faculty\r\n          const schedule = _formatSchedule(tempSchedule)\r\n          const officehours = _formatOfficeHour(tempOh)\r\n          const { RAN_FULL: rank } = Rank\r\n          const tempObj = {\r\n            username,\r\n            title,\r\n            fullname,\r\n            email,\r\n            officetel,\r\n            officebldg,\r\n            officeroom,\r\n            postbox,\r\n            website,\r\n            rank,\r\n            shortRank,\r\n            schedule,\r\n            officehours,\r\n            researchinterests: [],\r\n            publications: []\r\n          }\r\n          facultyList.push(tempObj)\r\n        })\r\n        let proms = []\r\n        facultyList.forEach(faculty => {\r\n          proms.push(\r\n            new Promise((resolve, reject) => {\r\n              Ressami.findAll({\r\n                where: { SAMI_ATID: faculty.username }\r\n              }).then(riArr => {\r\n                riArr.forEach(ri => {\r\n                  const { SAMI_TITLE } = ri\r\n                  faculty.researchinterests.push(SAMI_TITLE)\r\n                })\r\n                const tempRIARR = faculty.researchinterests.filter(\r\n                  (value, index, self) => {\r\n                    return self.indexOf(value) === index\r\n                  }\r\n                )\r\n                faculty.researchinterests = tempRIARR\r\n                resolve(faculty)\r\n              })\r\n            })\r\n          )\r\n        })\r\n        Promise.all(proms)\r\n          .then(array => {\r\n            let list = []\r\n            array.forEach(ri => {\r\n              list.push(ri)\r\n            })\r\n\r\n            saveFiles('faculty', 'faculty', JSON.stringify(list))\r\n          })\r\n          .catch(error => logger.log('error', error))\r\n        /* \r\n      }) */\r\n      })\r\n  }\r\n}\r\n\r\nconst _getActiveFaculty = (limit = null) => {\r\n  return Personal.findAll({\r\n    limit,\r\n    include: [\r\n      {\r\n        model: Rank\r\n      },\r\n      {\r\n        model: Schedule,\r\n        where: {\r\n          SCH_SEMES: term\r\n        },\r\n        required: false\r\n      },\r\n      {\r\n        model: OfficeHour,\r\n        where: {\r\n          OFF_SEMES: term\r\n        },\r\n        required: false\r\n      }\r\n    ],\r\n    where: {\r\n      Per_Status: 'Active',\r\n      Per_Dgroup: 'Faculty'\r\n    }\r\n  })\r\n}\r\n\r\nconst _formatSchedule = schedule => {\r\n  const am = new RegExp(/AM/, 'i')\r\n  const pm = new RegExp(/PM/, 'i')\r\n  let temp = []\r\n  Object.values(schedule).forEach(row => {\r\n    const start_hour = row['SCH_SHOUR'].match(am)\r\n      ? row['SCH_SHOUR'].replace(am, '').trim()\r\n      : row['SCH_SHOUR'].replace(pm, '').trim()\r\n    const start_ampm = row['SCH_SHOUR'].match(am) ? 'AM' : 'PM'\r\n    const end_hour = row['SCH_EHOUR'].match(am)\r\n      ? row['SCH_EHOUR'].replace(am, '').trim()\r\n      : row['SCH_EHOUR'].replace(pm, '').trim()\r\n    const end_ampm = row['SCH_EHOUR'].match(am) ? 'AM' : 'PM'\r\n    const {\r\n      SCH_ATID: username,\r\n      SCH_COURSE: course,\r\n      SCH_SEMES: term,\r\n      SCH_SECTION: section,\r\n      SCH_SMIN: start_minutes,\r\n      SCH_EMIN: end_minutes,\r\n      SCH_PLACE: place,\r\n      SCH_DAYS: days,\r\n      SCH_TYPE: type,\r\n      SCH_NOTES: note\r\n    } = row\r\n    temp.push({\r\n      username,\r\n      course,\r\n      term,\r\n      section,\r\n      start_hour,\r\n      start_minutes,\r\n      start_ampm,\r\n      end_hour,\r\n      end_minutes,\r\n      end_ampm,\r\n      days,\r\n      place,\r\n      type,\r\n      note\r\n    })\r\n  })\r\n  return temp\r\n}\r\n\r\nconst _formatOfficeHour = officehours => {\r\n  if (!officehours[0]) return null\r\n  let sun = [],\r\n    mon = [],\r\n    tue = [],\r\n    wed = [],\r\n    thu = []\r\n  const {\r\n    OFF_ATID: username,\r\n    OFF_SEMES: term,\r\n    OFF_LOC: office_location,\r\n    OFF_TEL: phone,\r\n    OFF_Notes: note,\r\n    OFF_S1,\r\n    OFF_S2,\r\n    OFF_S3,\r\n    OFF_S4,\r\n    OFF_S5,\r\n    OFF_S6,\r\n    OFF_S7,\r\n    OFF_S8,\r\n    OFF_U1,\r\n    OFF_U2,\r\n    OFF_U3,\r\n    OFF_U4,\r\n    OFF_U5,\r\n    OFF_U6,\r\n    OFF_U7,\r\n    OFF_U8,\r\n    OFF_M1,\r\n    OFF_M2,\r\n    OFF_M3,\r\n    OFF_M4,\r\n    OFF_M5,\r\n    OFF_M6,\r\n    OFF_M7,\r\n    OFF_M8,\r\n    OFF_T1,\r\n    OFF_T2,\r\n    OFF_T3,\r\n    OFF_T4,\r\n    OFF_T5,\r\n    OFF_T6,\r\n    OFF_T7,\r\n    OFF_T8,\r\n    OFF_W1,\r\n    OFF_W2,\r\n    OFF_W3,\r\n    OFF_W4,\r\n    OFF_W5,\r\n    OFF_W6,\r\n    OFF_W7,\r\n    OFF_W8,\r\n    OFF_R1,\r\n    OFF_R2,\r\n    OFF_R3,\r\n    OFF_R4,\r\n    OFF_R5,\r\n    OFF_R6,\r\n    OFF_R7,\r\n    OFF_R8\r\n  } = officehours[0]\r\n\r\n  if (OFF_S1.length > 0) sun.push(`${OFF_S1}:${OFF_S2}-${OFF_S3}:${OFF_S4}`)\r\n  if (OFF_S5.length > 0) sun.push(`${OFF_S5}:${OFF_S6}-${OFF_S7}:${OFF_S8}`)\r\n  if (OFF_U1.length > 0) mon.push(`${OFF_U1}:${OFF_U2}-${OFF_U3}:${OFF_U4}`)\r\n  if (OFF_U5.length > 0) mon.push(`${OFF_U5}:${OFF_U6}-${OFF_U7}:${OFF_U8}`)\r\n  if (OFF_M1.length > 0) tue.push(`${OFF_M1}:${OFF_M2}-${OFF_M3}:${OFF_M4}`)\r\n  if (OFF_M5.length > 0) tue.push(`${OFF_M5}:${OFF_M6}-${OFF_M7}:${OFF_M8}`)\r\n  if (OFF_T1.length > 0) wed.push(`${OFF_T1}:${OFF_T2}-${OFF_T3}:${OFF_T4}`)\r\n  if (OFF_T5.length > 0) wed.push(`${OFF_T5}:${OFF_T6}-${OFF_T7}:${OFF_T8}`)\r\n  if (OFF_W1.length > 0) thu.push(`${OFF_W1}:${OFF_W2}-${OFF_W3}:${OFF_W4}`)\r\n  if (OFF_W5.length > 0) thu.push(`${OFF_W5}:${OFF_W6}-${OFF_W7}:${OFF_W8}`)\r\n\r\n  return {\r\n    username,\r\n    term,\r\n    office_location,\r\n    phone,\r\n    note,\r\n    sun,\r\n    mon,\r\n    tue,\r\n    wed,\r\n    thu\r\n  }\r\n}\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Author = sequelize.define(\r\n  'PubAuthors',\r\n  {\r\n    AUT_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    AUT_PubCode: Sequelize.INTEGER,\r\n    AUT_ATID: {\r\n      type: Sequelize.STRING,\r\n      allowNull: true\r\n    },\r\n    AUT_NAME: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'PubAuthors',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = Author\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Author = require('../models/Author')\r\n\r\nconst Publication = sequelize.define(\r\n  'PubWork',\r\n  {\r\n    Pub_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    PUB_CODE: Sequelize.INTEGER,\r\n    PUB_Year: Sequelize.INTEGER,\r\n    PUB_IEEE: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'PubWork',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nPublication.belongsTo(Author, {\r\n  foreignKey: 'PUB_CODE',\r\n  targetKey: 'AUT_PubCode',\r\n  as: 'authors'\r\n})\r\nmodule.exports = Publication\r\n","const fs = require('fs')\r\nconst logger = require('./logger')\r\nconst sequelize = require('../models/Base')\r\nconst Publication = require('../models/Publication')\r\nconst Author = require('../models/Author')\r\nconst { getActiveFaculty } = require('./faculty.js')\r\nconst { createFolder, saveFiles } = require('./general.js')\r\nmodule.exports = {\r\n  async saveAllOtherAuthors() {\r\n    const others = await _getAllOtherAuthors()\r\n    let authors = {}\r\n    others.forEach(author => {\r\n      const { AUT_PubCode, AUT_NAME } = author\r\n      if (!authors[AUT_PubCode]) {\r\n        authors[AUT_PubCode] = []\r\n      }\r\n      authors[AUT_PubCode].push(AUT_NAME)\r\n    })\r\n    saveFiles('other_authors', 'publications', JSON.stringify(authors))\r\n  },\r\n  async savePublications() {\r\n    const years = await _getPublicationsArray().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    years.forEach(year => {\r\n      _savePublications(year)\r\n    })\r\n  },\r\n  async savePublicationsYears() {\r\n    const years = await _getPublicationsYears().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    let yearsArr = []\r\n    years.forEach(yearObj => {\r\n      const { PUB_Year: year } = yearObj\r\n      yearsArr.push(year)\r\n    })\r\n    saveFiles('years', 'publications', JSON.stringify(yearsArr))\r\n  },\r\n  async getFacultyPublications(username) {\r\n    return _getFacultyPublications(username)\r\n  },\r\n  async saveFacultyPublications() {\r\n    const facultyArr = await getActiveFaculty().catch(err =>\r\n      logger.log('error', err)\r\n    )\r\n    facultyArr.forEach(async faculty => {\r\n      const { Per_ATID: username } = faculty\r\n      const pubs = await _getFacultyPublications(username).catch(error =>\r\n        reject(error)\r\n      )\r\n      _saveFacultyPublications(username, pubs)\r\n    })\r\n  }\r\n}\r\n\r\nconst _getFacultyArticles = username => {\r\n  return new Promise((resolve, reject) => {\r\n    Publication.findAll({\r\n      order: [['PUB_Year', 'DESC']],\r\n      include: [\r\n        {\r\n          model: Author,\r\n          where: {\r\n            AUT_ATID: username\r\n          },\r\n          as: 'authors'\r\n        }\r\n      ]\r\n    })\r\n      .then(array => {\r\n        let listOFCodes = []\r\n        array.forEach(one => {\r\n          const { PUB_Year, PUB_IEEE, PUB_CODE } = one\r\n          const tempObj = {\r\n            year: PUB_Year,\r\n            title: PUB_IEEE,\r\n            code: PUB_CODE,\r\n            authors: []\r\n          }\r\n          listOFCodes.push(tempObj)\r\n        })\r\n        resolve(listOFCodes)\r\n      })\r\n      .catch(error => reject(error))\r\n  })\r\n}\r\n\r\nconst _getAllOtherAuthors = code => {\r\n  return sequelize.query(`select AUT_PubCode, AUT_NAME from PubAuthors`, {\r\n    model: Author\r\n  })\r\n}\r\n\r\nconst _getOtherAuthorsOfArticle = code => {\r\n  return sequelize.query(\r\n    `select AUT_NAME from PubAuthors where AUT_PubCode=${code}`,\r\n    {\r\n      model: Author\r\n    }\r\n  )\r\n}\r\n\r\nconst _updateArticleWithOtherAuthors = async articles => {\r\n  return new Promise((res, rej) => {\r\n    let proms = []\r\n    articles.forEach(async article => {\r\n      proms.push(\r\n        new Promise(async (resolve, reject) => {\r\n          const others = await _getOtherAuthorsOfArticle(article.code).catch(\r\n            error => reject(error)\r\n          )\r\n          resolve({\r\n            article,\r\n            others\r\n          })\r\n        })\r\n      )\r\n    })\r\n    Promise.all(proms)\r\n      .then(array => {\r\n        let list = []\r\n        array.forEach(item => {\r\n          const { article, others } = item\r\n          others.forEach(author => {\r\n            article.authors.push(author.get('AUT_NAME'))\r\n          })\r\n          list.push(article)\r\n        })\r\n        res(list)\r\n      })\r\n      .catch(err => rej(err))\r\n  })\r\n}\r\n\r\nconst _getFacultyPublications = async username => {\r\n  return new Promise(async (resolve, reject) => {\r\n    const articles = await _getFacultyArticles(username).catch(error =>\r\n      reject(error)\r\n    )\r\n    const list = await _updateArticleWithOtherAuthors(articles).catch(error =>\r\n      reject(error)\r\n    )\r\n    resolve(list)\r\n  })\r\n}\r\n\r\nconst _saveFacultyPublications = async (username, list) => {\r\n  const data = JSON.stringify(list)\r\n  saveFiles(username, 'faculty/publications', data)\r\n}\r\n\r\nconst _getPublicationsYears = () => {\r\n  return sequelize.query(\r\n    \"select distinct PUB_Year from PubWork where PUB_Year<>'' order by PUB_Year\",\r\n    {\r\n      model: Publication\r\n    }\r\n  )\r\n}\r\nconst _getPublicationsArray = async () => {\r\n  const years = await _getPublicationsYears().catch(err =>\r\n    logger.log('error', err)\r\n  )\r\n  let array = []\r\n  years.forEach(year => {\r\n    const { PUB_Year } = year\r\n    array.push(PUB_Year)\r\n  })\r\n  return array\r\n}\r\n\r\nconst _getPublications = (year = null) => {\r\n  const where = {}\r\n  if (year) {\r\n    where.PUB_Year = year\r\n  }\r\n  return Publication.findAll({\r\n    where\r\n  })\r\n}\r\n\r\nconst _savePublications = async (year = null) => {\r\n  const articles = await _getPublications(year).catch(err =>\r\n    logger.log('error', err)\r\n  )\r\n  let array = []\r\n  let promises = []\r\n  articles.forEach(async article => {\r\n    const { PUB_IEEE: title, PUB_CODE: code } = article\r\n    //promises.push(_getArticleWithAuthors(year, title, code))\r\n    promises.push({ year, title, code })\r\n  })\r\n  Promise.all(promises)\r\n    .then(tempArray => {\r\n      tempArray.forEach(art => array.push(art))\r\n      saveFiles(year, 'publications', JSON.stringify(array))\r\n    })\r\n    .catch(err => logger.log('error', err))\r\n}\r\n\r\nconst _getArticleWithAuthors = async (year, title, code) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    const others = await _getOtherAuthorsOfArticle(code).catch(err => {\r\n      logger.log('error', err)\r\n      reject('something went wrong ...')\r\n    })\r\n    const temp = {\r\n      title,\r\n      code,\r\n      year,\r\n      authors: []\r\n    }\r\n    if (others) {\r\n      others.forEach(author => {\r\n        temp.authors.push(author.get('AUT_NAME'))\r\n      })\r\n    }\r\n    resolve(temp)\r\n  })\r\n}\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst CourseFile = sequelize.define(\r\n  'CourseFile',\r\n  {\r\n    OFF_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    OFF_SEMESTER: Sequelize.STRING,\r\n    OFF_COURSE: Sequelize.STRING,\r\n    OFF_EXAM: Sequelize.STRING,\r\n    OFF_TYPE: Sequelize.STRING,\r\n    OFF_SECTION: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'CFF_CourseOffered',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = CourseFile\r\n","const CourseFile = require('../models/CourseFile')\r\nconst { saveFiles } = require('./general')\r\nconst logger = require('./logger')\r\n\r\nmodule.exports = {\r\n  getAllCourseFiles() {\r\n    return _getAllCourseFiles()\r\n  },\r\n  async saveAllCourseFiles() {\r\n    const list = await _getAllCourseFiles()\r\n    if (list != null) {\r\n      saveFiles('course_files', 'courseFiles', JSON.stringify(list))\r\n    } else {\r\n      logger.log(\r\n        'error',\r\n        'No course files were retrieved and no files were saved ..'\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst _CoursesIncludeCourse = (courses, course) => {\r\n  return courses.findIndex(value => value.course == course)\r\n}\r\n\r\nconst _getAllCourseFiles = () => {\r\n  return new Promise(resolve => {\r\n    CourseFile.findAll()\r\n      .then(rows => {\r\n        let list = []\r\n        rows.forEach(row => {\r\n          const {\r\n            OFF_SEMESTER: term,\r\n            OFF_COURSE: course,\r\n            OFF_SECTION: section,\r\n            OFF_EXAM: exam,\r\n            OFF_TYPE: type\r\n          } = row\r\n          const foundTermIndex = list.findIndex(value => value.term == term)\r\n          const file = {\r\n            name: exam,\r\n            link: `${course}_${term}_${section}_${exam}.${type}`\r\n          }\r\n          if (foundTermIndex < 0) {\r\n            list.push({\r\n              term,\r\n              courses: [{ course, exams: [file] }]\r\n            })\r\n          } else {\r\n            const courseIndex = _CoursesIncludeCourse(\r\n              list[foundTermIndex].courses,\r\n              course\r\n            )\r\n            if (courseIndex < 0) {\r\n              list[foundTermIndex].courses.push({\r\n                course,\r\n                exams: [file]\r\n              })\r\n            } else {\r\n              list[foundTermIndex].courses[courseIndex]['exams'].push(file)\r\n            }\r\n          }\r\n        })\r\n        resolve(list)\r\n      })\r\n      .catch(() => resolve(null))\r\n  })\r\n}\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Course = sequelize.define(\r\n  'Course',\r\n  {\r\n    ALC_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    ALC_COURSE: Sequelize.STRING,\r\n    ALC_TITLE: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'ALLCOURSES',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = Course\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst Course = require('./Course')\r\nconst Syllabus = sequelize.define(\r\n  'Syllabus',\r\n  {\r\n    SYL_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    SYL_COURSE: Sequelize.STRING,\r\n    SYL_SEMES: Sequelize.STRING\r\n  },\r\n  {\r\n    tableName: 'Syllabus',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nSyllabus.belongsTo(Course, {\r\n  foreignKey: 'SYL_COURSE',\r\n  targetKey: 'ALC_COURSE'\r\n})\r\nmodule.exports = Syllabus\r\n","const Course = require('../models/Course')\r\nconst Syllabus = require('../models/Syllabus')\r\nconst { saveFiles } = require('./general')\r\nmodule.exports = {\r\n  saveSyllabi() {\r\n    Syllabus.findAll({\r\n      include: [\r\n        {\r\n          model: Course\r\n        }\r\n      ]\r\n    }).then(rows => {\r\n      let list = [],\r\n        terms = []\r\n      rows.forEach(row => {\r\n        const { SYL_COURSE: course, SYL_SEMES: term, Course: courseObj } = row\r\n        if (courseObj) {\r\n          const { ALC_TITLE: title } = courseObj\r\n          !terms.includes(term) && terms.push(term)\r\n          list.push({ term, course, title })\r\n        }\r\n      })\r\n      terms.sort((a, b) => {\r\n        return parseInt(a) <= parseInt(b) ? 1 : -1\r\n      })\r\n      saveFiles('syllabus_terms', 'syllabi', JSON.stringify(terms))\r\n      saveFiles('syllabus_links', 'syllabi', JSON.stringify(list))\r\n    })\r\n  }\r\n}\r\n","const Sequelize = require('sequelize')\r\nconst sequelize = require('./Base')\r\nconst TechnicalReport = sequelize.define(\r\n  'TechnicalReport',\r\n  {\r\n    Tech_SNO: {\r\n      type: Sequelize.INTEGER,\r\n      primaryKey: true\r\n    },\r\n    Tech_CODE: Sequelize.INTEGER,\r\n    Tech_DCODE: Sequelize.STRING,\r\n    Tech_Title: Sequelize.STRING,\r\n    Tech_Authors: Sequelize.STRING,\r\n    Tech_Year: Sequelize.INTEGER\r\n  },\r\n  {\r\n    tableName: 'Tech_reports',\r\n    updatedAt: false,\r\n    createdAt: false\r\n  }\r\n)\r\n\r\nmodule.exports = TechnicalReport\r\n","const TechnicalReport = require('../models/TechnicalReport')\r\nconst { saveFiles } = require('./general')\r\n\r\nmodule.exports = {\r\n  saveTechnicalReports() {\r\n    TechnicalReport.findAll({\r\n      order: [\r\n        ['Tech_Year', 'DESC'],\r\n        ['Tech_Authors', 'ASC'],\r\n        ['Tech_Title', 'ASC']\r\n      ],\r\n      where: {\r\n        Tech_DCODE: 'MATH'\r\n      }\r\n    }).then(rows => {\r\n      let list = []\r\n      rows.forEach(row => {\r\n        const {\r\n          Tech_CODE: code,\r\n          Tech_Title: title,\r\n          Tech_Authors: authors,\r\n          Tech_Year: year\r\n        } = row\r\n\r\n        list.push({\r\n          code,\r\n          title,\r\n          authors,\r\n          year\r\n        })\r\n      })\r\n      saveFiles('technical_reports', 'TechnicalReports', JSON.stringify(list))\r\n    })\r\n  }\r\n}\r\n","require('dotenv').config()\r\nconst cron = require('node-cron')\r\nconst logger = require('./app/files/logger')\r\nconst { saveAllRanks } = require('./app/files/ranks')\r\nconst {\r\n  saveFaculty,\r\n  saveFacultyPics,\r\n  saveFacultyCourseFiles\r\n} = require('./app/files/faculty')\r\nconst {\r\n  saveFacultyPublications,\r\n  savePublicationsYears,\r\n  savePublications,\r\n  saveAllOtherAuthors\r\n} = require('./app/files/publications')\r\nconst { saveAllCourseFiles } = require('./app/files/course_files')\r\nconst { saveSyllabi } = require('./app/files/syllabi')\r\nconst { saveTechnicalReports } = require('./app/files/technical_reports')\r\n//saveAllCourseFiles()\r\n\r\nlogger.log('info', 'Started running ... ' + new Date().toLocaleString())\r\n/*\r\nTime to execute \r\n*/\r\n\r\nconst h = 0,\r\n  m = 5,\r\n  s = 0,\r\n  increment_minutes = 5\r\n\r\n// 1)\r\n//save list of active faculty in files/faculty/faculty.json\r\n// every day at 12:05:00 AM\r\nlet minutes = m + increment_minutes\r\ncron.schedule(s + ' ' + minutes + ' ' + h + ' * * *', function() {\r\n  const date = new Date().toLocaleString()\r\n  logger.log('info', `start saving active faculty in files at ${date}`)\r\n  saveFaculty()\r\n  logger.log('info', `start saving list of faculty ranks at ${date}`)\r\n  saveAllRanks()\r\n  logger.log('info', `start saving active faculty course files at ${date}`)\r\n  saveFacultyCourseFiles()\r\n  logger.log('info', `start saving active faculty publications at ${date}`)\r\n  saveFacultyPublications()\r\n  /*\r\n  logger.log(\r\n    'info',\r\n    `start saving active faculty pictures in images at ${date}`\r\n  )\r\n  saveFacultyPics()\r\n  */\r\n})\r\n\r\n// 2)\r\n// save list of years in files/publications/years.json\r\n// every day at 12:25:00 AM\r\nminutes = minutes + increment_minutes\r\ncron.schedule(s + ' ' + minutes + ' ' + h + ' * * *', function() {\r\n  const date = new Date().toLocaleString()\r\n  logger.log('info', `start saving list of years at ${date}`)\r\n  savePublicationsYears()\r\n  logger.log('info', `start saving publications year by year at ${date}`)\r\n  savePublications()\r\n  logger.log('info', `start saving other authors at ${date}`)\r\n  saveAllOtherAuthors()\r\n  logger.log('info', `start saving syllabi at ${date}`)\r\n  saveSyllabi()\r\n})\r\n\r\n// 3)\r\n// save list of all course files in files/courseFiles/course_files.json\r\n// every day at 12:45:00 AM\r\nminutes = minutes + increment_minutes\r\ncron.schedule(s + ' ' + minutes + ' ' + h + ' * * *', function() {\r\n  const date = new Date().toLocaleString()\r\n  logger.log('info', `start saving list of all course files at ${date}`)\r\n  saveAllCourseFiles()\r\n  logger.log('info', `start saving list of all technical reports at ${date}`)\r\n  saveTechnicalReports()\r\n})\r\n"]}